(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{2065:(e,a,t)=>{"use strict";t.d(a,{d:()=>s});var r=t(8867);let n={app_scale:1,auto_collapse_when_launch:!1,auto_expand_when_enter_battlefield:!1,auto_collapse_when_leave_battlefield:!1,hide_situation_copy_btn:!1,badboy_threshold:2e4},s=e=>(e||(e={}),(0,r.gc)(n,e||{}))},2202:(e,a,t)=>{Promise.resolve().then(t.bind(t,9635))},2793:(e,a,t)=>{"use strict";t.d(a,{D5:()=>r,DZ:()=>c,U5:()=>o,c3:()=>n,om:()=>s,xN:()=>i});let r={githubRepo:"https://github.com/InfSein/frontline-overlay",changelogDoc:"https://infsein.github.io/frontline-overlay/changelog"};var n=function(e){return e.maelstrom="maelstrom",e.twinadder="twinadder",e.immoflame="immoflame",e}({}),s=function(e){return e.secure="secure",e.seize="seize",e.shatter="shatter",e.naadam="naadam",e.triumph="triumph",e}({}),c=function(e){return e.hiddengorge="hiddengorge",e}({}),i=function(e){return e.palaistra="palaistra",e.cloudnine="cloudnine",e.volcanic="volcanic",e.castletown="castletown",e.redsands="redsands",e}({});let l={frontline:{secure:1273,seize:431,shatter:554,naadam:888,triumph:1313},rivalWings:{hiddengorge:791},crystalConflict:{palaistra:[1032,1058],cloudnine:[1034,1060],volcanic:[1033,1059],castletown:[1116,1117],redsands:[1138,1139]}},o=new Map([[l.frontline.secure,"secure"],[l.frontline.seize,"seize"],[l.frontline.shatter,"shatter"],[l.frontline.naadam,"naadam"],[l.frontline.triumph,"triumph"],[l.rivalWings.hiddengorge,"hiddengorge"],...Object.entries(l.crystalConflict).flatMap(e=>{let[a,t]=e;return t.map(e=>[e,i[a]])})])},4768:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s,q:()=>c});let r="APP_CONFIG";var n=t(2065);let s=()=>{try{let e=localStorage.getItem(r);if(e){let a=JSON.parse(e);return(0,n.d)(a)}}catch(e){}return(0,n.d)()},c=e=>{let a=JSON.stringify(e);localStorage.setItem(r,a)}},8867:(e,a,t)=>{"use strict";t.d(a,{A4:()=>n,DB:()=>o,Ef:()=>h,Ey:()=>l,Hh:()=>b,SY:()=>f,Tv:()=>d,W4:()=>x,Yj:()=>c,_5:()=>u,_E:()=>m,gc:()=>s,lW:()=>i,n8:()=>g,wR:()=>y,xq:()=>p});var r=t(2793);let n=e=>{try{return JSON.parse(JSON.stringify(e))}catch(a){return console.warn("Deep copy failed due to",a,"\norigin:",e),e}},s=(e,a)=>{for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&"__proto__"!==t&&"constructor"!==t&&("object"!=typeof e[t]||Array.isArray(e[t])||null===e[t]?a[t]=void 0!==a[t]?a[t]:e[t]:(Object.prototype.hasOwnProperty.call(a,t)||(a[t]={}),a[t]=s(e[t],a[t])));return a},c=async()=>{var e,a;let t=(null==(a=document)||null==(e=a.location)?void 0:e.origin)+document.location.pathname+"version.json";t+="?t=".concat(new Date().getTime());let r=await fetch(t).then(e=>e.json());return{needUpdate:"2.0.0"!==r.app,latestVersion:r.app}},i=e=>{let a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)},l=e=>{let a=new Date(e),t=e=>e.toString().padStart(2,"0"),r=a.getFullYear(),n=t(a.getMonth()+1),s=t(a.getDate()),c=t(a.getHours()),i=t(a.getMinutes()),l=t(a.getSeconds());return"".concat(r,"-").concat(n,"-").concat(s," ").concat(c,":").concat(i,":").concat(l)},o=e=>{switch(e){case r.c3.maelstrom:return"黑涡团";case r.c3.twinadder:return"双蛇党";case r.c3.immoflame:return"恒辉队"}},d=e=>{switch(e){case r.c3.maelstrom:return"#942110";case r.c3.twinadder:return"#9F9E44";case r.c3.immoflame:return"#285FB7"}},m=e=>"./image/".concat(e,".png"),u=e=>{let a="",t="";switch(e){case 19:a="骑士",t="paladin";break;case 20:a="武僧",t="monk";break;case 21:a="战士",t="warrior";break;case 22:a="龙骑士",t="dragoon";break;case 23:a="吟游诗人",t="bard";break;case 24:a="白魔法师",t="whitemage";break;case 25:a="黑魔法师",t="blackmage";break;case 27:a="召唤师",t="summoner";break;case 28:a="学者",t="scholar";break;case 30:a="忍者",t="ninja";break;case 31:a="机工士",t="machinist";break;case 32:a="暗黑骑士",t="darkknight";break;case 33:a="占星术士",t="astrologian";break;case 34:a="武士",t="samurai";break;case 35:a="赤魔法师",t="redmage";break;case 37:a="绝枪战士",t="gunbreaker";break;case 38:a="舞者",t="dancer";break;case 39:a="钐镰客",t="reaper";break;case 40:a="贤者",t="sage";break;case 41:a="蝰蛇剑士",t="viper";break;case 42:a="绘灵法师",t="pictomancer";break;default:a="未知",t="none"}return{job_name:a,job_icon:t}},h=e=>{switch(e){case r.om.secure:return["阵地","周边遗迹群","阵地战"];case r.om.seize:return["尘封","尘封秘岩","争夺战"];case r.om.shatter:return["碎冰","荣誉野","碎冰战"];case r.om.naadam:return["草原","昂萨哈凯尔","竞争战"];case r.om.triumph:return["高原","沃刻其特","演习战"];case r.DZ.hiddengorge:return["隐塞","隐塞","机动战"];case r.xN.palaistra:return["学校","角力学校","水晶冲突"];case r.xN.cloudnine:return["九霄","九霄云上","水晶冲突"];case r.xN.volcanic:return["火山","火山之心","水晶冲突"];case r.xN.castletown:return["大殿","机关大殿","水晶冲突"];case r.xN.redsands:return["沙漠","赤土红沙","水晶冲突"]}},p=e=>{switch(e){case r.om.shatter:case r.xN.redsands:return"black";default:return}},g=e=>{switch(e){case r.om.secure:return"#776154";case r.om.seize:return"#44756A";case r.om.shatter:return"#F6F9F6";case r.om.naadam:return"#616D22";case r.om.triumph:return"#418CBF";case r.DZ.hiddengorge:return"#946141";case r.xN.palaistra:return"#1E3743";case r.xN.cloudnine:return"#56849B";case r.xN.volcanic:return"#976E5A";case r.xN.castletown:return"#211B19";case r.xN.redsands:return"#EAC38C"}},y=e=>{switch(e){case"1st":return"#FFD700";case"2nd":return"#C0C0C0";case"3rd":return"#CD7F32";case"win":return"#4CAF50";case"lose":return"#F44336";default:return"#FFFFFF"}},x=e=>"./image/".concat(e,".webp"),b=e=>{var a;return null!=(a=[0,2,4,6,10,12,14,18,20,22][e])?a:0},f=e=>{let a,t=!1,r=0,n=0;return[8,10,12,14,16,18,20,22].forEach(c=>{let i=e[c],l=e[c+1];if("0"===i)return;let{dodgeOrMiss:o,damaged:d,healed:m}=function(e){let a=parseInt(e||"0",16);return{dodgeOrMiss:(15&a)==1,damaged:(15&a)==3,healed:(15&a)==4,damageBlocked:(15&a)==5,damageParried:(15&a)==6,instantDead:(255&a)==51}}(i);!o&&(t=!0,d&&(a?"heal"===a&&(a="both"):a="damage",r+=s(l)),m&&(a?"damage"===a&&(a="both"):a="heal",n+=s(l)))}),null!=a||(a="damage"),{hit:t,damageType:a,damage:r,heal:n};function s(e){let a=(e||"").padStart(8,"0");if("4"!==a[4])return parseInt(a.slice(0,4),16);{let e=a.slice(0,2),t=a.slice(2,4),r=a.slice(6,8),n=parseInt(t,16),s=parseInt(r,16);return parseInt(r+e+((n-s+256)%256).toString(16).padStart(2,"0").toUpperCase(),16)}}}},9635:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var r=t(5155),n=t(2115),s=t(3435),c=t(5057),i=t(168),l=t(487),o=t(4092),d=t(7774),m=t(5705),u=t(9657),h=t(1753),p=t(1989),g=t(2340),y=t(2065),x=t(8867),b=t(4768);let f=[{key:"general",name:"通用",icon:"system-setting",items:[{key:"app_scale",name:"悬浮窗缩放",desc:["调整悬浮窗的显示大小倍数。","当你使用了infsein.github.io提供的其他悬浮窗时，请使用此处而非ACT的设置来调整缩放。"],type:"slider-number",min:.5,max:2,step:.1},{key:"auto_collapse_when_launch",name:"启动时自动折叠",desc:["在悬浮窗初次加载时自动折叠悬浮窗。","这也包括刷新悬浮窗的场合。"],type:"switch"},{key:"auto_expand_when_enter_battlefield",name:"进入对战时自动展开",desc:["在对战开始时自动展开悬浮窗。"],type:"switch"},{key:"auto_collapse_when_leave_battlefield",name:"离开对战时自动折叠",desc:["在离开对战区域时自动折叠悬浮窗。","初次加载或是在PvE区域内切换地图时不会触发。"],type:"switch"}]},{key:"situation",name:"战况",icon:"map-distance",items:[{key:"hide_situation_copy_btn",name:"隐藏复制点分按钮",desc:["如果你不需要战况选项卡中的复制点分按钮，可以打开此选项将其隐藏。"],type:"switch"}]},{key:"monitor",name:"监控",icon:"precise-monitor",items:[{key:"badboy_threshold",name:"坏人阈值",desc:["设置一个10000～99999之间的数字作为阈值。","当你受到超过阈值的伤害时，即使此技能不在坏人监控之列，也仍然会进入坏人统计。"],type:"number",min:1e4,max:99999,step:1e3,decimalPlaces:0}]}];function w(){let[e,a]=(0,n.useState)((0,y.d)()),[t,w]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=(0,b.Z)();a((0,x.A4)(e)),w(Object.fromEntries(f.map(e=>[e.key,!1])))},[a]);let k=(e,t)=>{a(a=>({...a,[e]:t}))};return(0,r.jsxs)("div",{className:"p-6 max-w-4xl mx-auto space-y-4",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold flex items-center",children:["设置",(0,r.jsx)("div",{className:"ml-auto",children:(0,r.jsx)(d.$,{shape:"rectangle",size:"large",theme:"success",variant:"base",icon:(0,r.jsx)(p.A,{}),onClick:()=>{(0,b.q)(e),window.opener&&window.opener.postMessage({type:"config:update"},window.location.origin),window.close()},children:"保存"})})]}),(0,r.jsx)(m.c,{style:{marginTop:"0.25rem",marginBottom:"0.25rem"}}),f.map(a=>(0,r.jsx)(u.Z,{className:"shadow-sm rounded-2xl border border-gray-100",bordered:!0,headerBordered:!0,title:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.r,{name:a.icon}),(0,r.jsx)("span",{className:"font-semibold",children:a.name})]}),actions:(0,r.jsx)(d.$,{theme:"default",variant:"text",onClick:()=>{var e;return e=a.key,void w(a=>({...a,[e]:!a[e]}))},children:t[a.key]?(0,r.jsx)(g.r,{name:"chevron-down"}):(0,r.jsx)(g.r,{name:"chevron-up"})}),children:!t[a.key]&&(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:a.items.map(a=>(0,r.jsxs)("div",{className:"flex items-center justify-between px-1 py-2 hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"text-base font-medium",children:[a.name,a.beta&&(0,r.jsx)(h.m_,{content:"此设置项仅作测试之用，随时可能被更改或删除。",showArrow:!1,children:(0,r.jsx)("span",{className:"text-[12px] leading-[1] font-normal p-1 text-white bg-[#E37318] ml-1 rounded",children:"BETA"})})]}),!!a.desc&&a.desc.map((e,a)=>"string"==typeof e?(0,r.jsx)("span",{className:"text-xs text-gray-500",children:e},a):(0,r.jsx)("span",{className:e.className,style:e.style,children:e.content},a))]}),(0,r.jsx)("div",{children:(a=>{switch(a.type){case"switch":return(0,r.jsx)(s.d,{value:e[a.key],onChange:e=>k(a.key,e)});case"string":return(0,r.jsx)(c.pd,{value:e[a.key],onChange:e=>k(a.key,e),className:"w-60"});case"number":return(0,r.jsx)(i.Y,{value:e[a.key],onChange:e=>k(a.key,e),min:a.min,max:a.max,step:a.step,decimalPlaces:a.decimalPlaces,allowInputOverLimit:!1,className:"w-40"});case"slider-number":return(0,r.jsx)(l.A,{value:e[a.key],onChange:e=>k(a.key,e),min:a.min,max:a.max,step:a.step,className:"min-w-[9rem]"});case"select":return(0,r.jsx)(o.l,{value:e[a.key],onChange:e=>k(a.key,e),options:a.options,className:"w-48"});default:return null}})(a)})]},a.key))})},a.key))]})}}},e=>{e.O(0,[28,919,290,312,324,41,441,964,358],()=>e(e.s=2202)),_N_E=e.O()}]);