(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{2065:(e,t,a)=>{"use strict";a.d(t,{d:()=>s});var n=a(8867);let r={app_scale:1,auto_collapse_when_launch:!1,auto_expand_when_enter_battlefield:!1,auto_collapse_when_leave_battlefield:!1,hide_situation_copy_btn:!1},s=e=>(e||(e={}),(0,n.gc)(r,e||{}))},2202:(e,t,a)=>{Promise.resolve().then(a.bind(a,9635))},2793:(e,t,a)=>{"use strict";a.d(t,{D5:()=>n,DZ:()=>c,U5:()=>o,c3:()=>r,om:()=>s,xN:()=>i});let n={githubRepo:"https://github.com/InfSein/frontline-overlay",changelogDoc:"https://infsein.github.io/frontline-overlay/changelog"};var r=function(e){return e.maelstrom="maelstrom",e.twinadder="twinadder",e.immoflame="immoflame",e}({}),s=function(e){return e.secure="secure",e.seize="seize",e.shatter="shatter",e.naadam="naadam",e}({}),c=function(e){return e.hiddengorge="hiddengorge",e}({}),i=function(e){return e.palaistra="palaistra",e.cloudnine="cloudnine",e.volcanic="volcanic",e.castletown="castletown",e.redsands="redsands",e}({});let l={frontline:{secure:1273,seize:431,shatter:554,naadam:888},rivalWings:{hiddengorge:791},crystalConflict:{palaistra:[1032,1058],cloudnine:[1034,1060],volcanic:[1033,1059],castletown:[1116,1117],redsands:[1138,1139]}},o=new Map([[l.frontline.secure,"secure"],[l.frontline.seize,"seize"],[l.frontline.shatter,"shatter"],[l.frontline.naadam,"naadam"],[l.rivalWings.hiddengorge,"hiddengorge"],...Object.entries(l.crystalConflict).flatMap(e=>{let[t,a]=e;return a.map(e=>[e,i[t]])})])},4768:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s,q:()=>c});let n="APP_CONFIG";var r=a(2065);let s=()=>{try{let e=localStorage.getItem(n);if(e){let t=JSON.parse(e);return(0,r.d)(t)}}catch(e){}return(0,r.d)()},c=e=>{let t=JSON.stringify(e);localStorage.setItem(n,t)}},8867:(e,t,a)=>{"use strict";a.d(t,{A4:()=>r,DB:()=>o,Ef:()=>m,Ey:()=>l,SY:()=>x,Tv:()=>d,W4:()=>y,Yj:()=>c,_E:()=>u,gc:()=>s,lW:()=>i,n8:()=>h,wR:()=>g,xq:()=>p});var n=a(2793);let r=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){return console.warn("Deep copy failed due to",t,"\norigin:",e),e}},s=(e,t)=>{for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&"__proto__"!==a&&"constructor"!==a&&("object"!=typeof e[a]||Array.isArray(e[a])||null===e[a]?t[a]=void 0!==t[a]?t[a]:e[a]:(Object.prototype.hasOwnProperty.call(t,a)||(t[a]={}),t[a]=s(e[a],t[a])));return t},c=async()=>{var e,t;let a=(null==(t=document)||null==(e=t.location)?void 0:e.origin)+document.location.pathname+"version.json";a+="?t=".concat(new Date().getTime());let n=await fetch(a).then(e=>e.json());return{needUpdate:"1.6.1"!==n.app,latestVersion:n.app}},i=e=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},l=e=>{let t=new Date(e),a=e=>e.toString().padStart(2,"0"),n=t.getFullYear(),r=a(t.getMonth()+1),s=a(t.getDate()),c=a(t.getHours()),i=a(t.getMinutes()),l=a(t.getSeconds());return"".concat(n,"-").concat(r,"-").concat(s," ").concat(c,":").concat(i,":").concat(l)},o=e=>{switch(e){case n.c3.maelstrom:return"黑涡团";case n.c3.twinadder:return"双蛇党";case n.c3.immoflame:return"恒辉队"}},d=e=>{switch(e){case n.c3.maelstrom:return"#942110";case n.c3.twinadder:return"#9F9E44";case n.c3.immoflame:return"#285FB7"}},u=e=>"./image/".concat(e,".png"),m=e=>{switch(e){case n.om.secure:return["阵地","周边遗迹群","阵地战"];case n.om.seize:return["尘封","尘封秘岩","争夺战"];case n.om.shatter:return["碎冰","荣誉野","碎冰战"];case n.om.naadam:return["草原","昂萨哈凯尔","竞争战"];case n.DZ.hiddengorge:return["隐塞","隐塞","机动战"];case n.xN.palaistra:return["学校","角力学校","水晶冲突"];case n.xN.cloudnine:return["九霄","九霄云上","水晶冲突"];case n.xN.volcanic:return["火山","火山之心","水晶冲突"];case n.xN.castletown:return["大殿","机关大殿","水晶冲突"];case n.xN.redsands:return["沙漠","赤土红沙","水晶冲突"]}},p=e=>{switch(e){case n.om.shatter:case n.xN.redsands:return"black";default:return}},h=e=>{switch(e){case n.om.secure:return"#776154";case n.om.seize:return"#44756A";case n.om.shatter:return"#F6F9F6";case n.om.naadam:return"#616D22";case n.DZ.hiddengorge:return"#946141";case n.xN.palaistra:return"#1E3743";case n.xN.cloudnine:return"#56849B";case n.xN.volcanic:return"#976E5A";case n.xN.castletown:return"#211B19";case n.xN.redsands:return"#EAC38C"}},g=e=>{switch(e){case"1st":return"#FFD700";case"2nd":return"#C0C0C0";case"3rd":return"#CD7F32";case"win":return"#4CAF50";case"lose":return"#F44336";default:return"#FFFFFF"}},y=e=>"./image/".concat(e,".webp"),x=e=>{let t=!1,a="damage",n=0;return[8,10,12,14,16,18,20,22].forEach(r=>{let{dodgeOrMiss:s,damaged:c,healed:i}=function(e){let t=parseInt(e||"0",16);return{dodgeOrMiss:(15&t)==1,damaged:(15&t)==3,healed:(15&t)==4,damageBlocked:(15&t)==5,damageParried:(15&t)==6,instantDead:(255&t)==51}}(e[r]);if(!s&&(c||i)){t=!0,n=function(e){let t=(e||"").padStart(8,"0");if("4"!==t[4])return parseInt(t.slice(0,4),16);{let e=t.slice(0,2),a=t.slice(2,4),n=t.slice(6,8),r=parseInt(a,16),s=parseInt(n,16);return parseInt(n+e+((r-s+256)%256).toString(16).padStart(2,"0").toUpperCase(),16)}}(e[r+1]),i&&(a="heal");return}}),{hit:t,damageType:a,damage:n}}},9635:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var n=a(5155),r=a(2115),s=a(3435),c=a(5057),i=a(168),l=a(1450),o=a(4092),d=a(7774),u=a(5705),m=a(9657),p=a(1989),h=a(2340),g=a(2065),y=a(8867),x=a(4768);let f=[{key:"general",name:"通用",icon:"system-setting",items:[{key:"app_scale",name:"悬浮窗缩放",desc:["调整悬浮窗的显示大小倍数。","当你使用了infsein.github.io提供的其他悬浮窗时，请使用此处而非ACT的设置来调整缩放。"],type:"slider-number",min:.5,max:2,step:.1},{key:"auto_collapse_when_launch",name:"启动时自动折叠",desc:["在悬浮窗初次加载时自动折叠悬浮窗。","这也包括刷新悬浮窗的场合。"],type:"switch"},{key:"auto_expand_when_enter_battlefield",name:"进入对战时自动展开",desc:["在对战开始时自动展开悬浮窗。"],type:"switch"},{key:"auto_collapse_when_leave_battlefield",name:"离开对战时自动折叠",desc:["在离开对战区域时自动折叠悬浮窗。","初次加载或是在PvE区域内切换地图时不会触发。"],type:"switch"}]},{key:"situation",name:"战况",icon:"map-distance",items:[{key:"hide_situation_copy_btn",name:"隐藏复制点分按钮",desc:["如果你不需要战况选项卡中的复制点分按钮，可以打开此选项将其隐藏。"],type:"switch"}]}];function w(){let[e,t]=(0,r.useState)((0,g.d)()),[a,w]=(0,r.useState)({});(0,r.useEffect)(()=>{let e=(0,x.Z)();t((0,y.A4)(e)),w(Object.fromEntries(f.map(e=>[e.key,!1])))},[t]);let v=(e,a)=>{t(t=>({...t,[e]:a}))};return(0,n.jsxs)("div",{className:"p-6 max-w-4xl mx-auto space-y-4",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold flex items-center",children:["设置",(0,n.jsx)("div",{className:"ml-auto",children:(0,n.jsx)(d.$,{shape:"rectangle",size:"large",theme:"success",variant:"base",icon:(0,n.jsx)(p.A,{}),onClick:()=>{(0,x.q)(e),window.opener&&window.opener.postMessage({type:"config:update"},window.location.origin),window.close()},children:"保存"})})]}),(0,n.jsx)(u.c,{style:{marginTop:"0.25rem",marginBottom:"0.25rem"}}),f.map(t=>(0,n.jsx)(m.Z,{className:"shadow-sm rounded-2xl border border-gray-100",bordered:!0,headerBordered:!0,title:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(h.r,{name:t.icon}),(0,n.jsx)("span",{className:"font-semibold",children:t.name})]}),actions:(0,n.jsx)(d.$,{theme:"default",variant:"text",onClick:()=>{var e;return e=t.key,void w(t=>({...t,[e]:!t[e]}))},children:a[t.key]?(0,n.jsx)(h.r,{name:"chevron-down"}):(0,n.jsx)(h.r,{name:"chevron-up"})}),children:!a[t.key]&&(0,n.jsx)("div",{className:"divide-y divide-gray-100",children:t.items.map(t=>(0,n.jsxs)("div",{className:"flex items-center justify-between px-1 py-2 hover:bg-gray-50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-base font-medium",children:t.name}),!!t.desc&&t.desc.map((e,t)=>"string"==typeof e?(0,n.jsx)("span",{className:"text-xs text-gray-500",children:e},t):(0,n.jsx)("span",{className:e.className,style:e.style,children:e.content},t))]}),(0,n.jsx)("div",{children:(t=>{switch(t.type){case"switch":return(0,n.jsx)(s.d,{value:e[t.key],onChange:e=>v(t.key,e)});case"string":return(0,n.jsx)(c.pd,{value:e[t.key],onChange:e=>v(t.key,e),className:"w-60"});case"number":return(0,n.jsx)(i.Y,{value:e[t.key],onChange:e=>v(t.key,e),min:0,className:"w-40"});case"slider-number":return(0,n.jsx)(l.A,{value:e[t.key],onChange:e=>v(t.key,e),min:t.min,max:t.max,step:t.step,className:"min-w-[9rem]"});case"select":return(0,n.jsx)(o.l,{value:e[t.key],onChange:e=>v(t.key,e),options:t.options,className:"w-48"});default:return null}})(t)})]},t.key))})},t.key))]})}}},e=>{e.O(0,[28,515,685,996,441,964,358],()=>e(e.s=2202)),_N_E=e.O()}]);