(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2065:(e,t,a)=>{"use strict";a.d(t,{d:()=>s});var r=a(8867);let n={app_scale:1,auto_collapse_when_launch:!1,auto_expand_when_enter_battlefield:!1,auto_collapse_when_leave_battlefield:!1,hide_situation_copy_btn:!1,badboy_threshold:2e4},s=e=>(e||(e={}),(0,r.gc)(n,e||{}))},2793:(e,t,a)=>{"use strict";a.d(t,{D5:()=>r,DZ:()=>l,U5:()=>o,c3:()=>n,om:()=>s,xN:()=>i});let r={githubRepo:"https://github.com/InfSein/frontline-overlay",changelogDoc:"https://infsein.github.io/frontline-overlay/changelog"};var n=function(e){return e.maelstrom="maelstrom",e.twinadder="twinadder",e.immoflame="immoflame",e}({}),s=function(e){return e.secure="secure",e.seize="seize",e.shatter="shatter",e.naadam="naadam",e}({}),l=function(e){return e.hiddengorge="hiddengorge",e}({}),i=function(e){return e.palaistra="palaistra",e.cloudnine="cloudnine",e.volcanic="volcanic",e.castletown="castletown",e.redsands="redsands",e}({});let c={frontline:{secure:1273,seize:431,shatter:554,naadam:888},rivalWings:{hiddengorge:791},crystalConflict:{palaistra:[1032,1058],cloudnine:[1034,1060],volcanic:[1033,1059],castletown:[1116,1117],redsands:[1138,1139]}},o=new Map([[c.frontline.secure,"secure"],[c.frontline.seize,"seize"],[c.frontline.shatter,"shatter"],[c.frontline.naadam,"naadam"],[c.rivalWings.hiddengorge,"hiddengorge"],...Object.entries(c.crystalConflict).flatMap(e=>{let[t,a]=e;return a.map(e=>[e,i[t]])})])},3247:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>en});var r=a(5155),n=a(2115),s=a(1812),l=a(2793),i=a(8867),c=a(2065),o=a(4768);function d(e){let{type:t,specifyColor:a,ptLv:n,ptName:s,ptProgress:l,ptDescription:i}=e,c="";return c="active"===t?"#70ACFFFF":"#ADADADFF",a&&(c=a),(0,r.jsxs)("div",{className:"relative flex items-center gap-1 p-2 rounded overflow-hidden",style:{backgroundColor:"transparent",border:"2px solid ".concat(c),boxShadow:"0 10px 15px -3px #0000001a, 0 4px 6px -4px #0000001a"},children:[(0,r.jsx)("div",{className:"absolute left-0 top-0 h-full opacity-30 z-0 transition-all pointer-events-none",style:{width:"".concat(null!=l?l:100,"%"),backgroundColor:c}}),(0,r.jsxs)("div",{className:"relative z-10 px-1 flex items-center w-full text-[1.25rem] text-white leading-[1.1]",children:[(0,r.jsxs)("div",{className:"text-[1.375rem]",children:[(0,r.jsx)("span",{className:"font-bold",children:n}),(0,r.jsxs)("span",{children:["　",s]})]}),(0,r.jsx)("div",{className:"ml-auto",children:i})]})]})}let m={[l.c3.maelstrom]:0,[l.c3.twinadder]:0,[l.c3.immoflame]:0},h={},u=[],p={E0000000:"(场地/dot)"},x={},g={},f={},j={},v=[],b=[],N=[],w={pidIndex:1,currFrontlineResult:void 0,currFrontlineStartTime:0},y=(0,n.createContext)(void 0),k=()=>{let e=(0,n.useContext)(y);if(!e)throw Error("useOverlayData must be used within an OverlayDataProvider");return e},D=e=>{let{children:t}=e,{initialize:a,addOverlayListener:k,removeOverlayListener:D,startOverlayEvents:S,getCombatants:_}=(()=>{let e,t,a=[],r=0,n={},s={},l=!1;function i(e){if(s[e.type])for(let t of s[e.type])t(e)}return{eventsStarted:!1,initialize:r=>{let s=/[\?&]OVERLAY_WS=([^&]+)/.exec(r.location.href);s?(t=t=>{a?a.push(t):e.send(JSON.stringify(t))},!function r(){(e=new WebSocket(s[1])).addEventListener("error",e=>{console.error(e)}),e.addEventListener("open",()=>{let e=null!=a?a:[];for(let r of(a=null,e))t(r)}),e.addEventListener("message",e=>{try{e=JSON.parse(e.data)}catch(t){console.error("Invalid message received: ",e);return}void 0!==e.rseq&&n[e.rseq]?(n[e.rseq](e),delete n[e.rseq]):i(e)}),e.addEventListener("close",()=>{a=[],setTimeout(()=>{r()},300)})}()):(t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a?a.push([e,t]):r.OverlayPluginApi.callHandler(JSON.stringify(e),t)},!function e(){if(!r.OverlayPluginApi||!r.OverlayPluginApi.ready)return void setTimeout(e,300);let n=null!=a?a:[];for(let[e,s]of(a=null,r.__OverlayCallback=i,n))t(e,s)}())},addOverlayListener:(e,t)=>{l&&s[e]&&console.warn("A new listener for ".concat(e," has been registered after event transmission has already begun.")),s[e]||(s[e]=[]),s[e].push(t)},removeOverlayListener:(e,t)=>{if(s[e]){let a=s[e],r=a.indexOf(t);r>-1&&a.splice(r,1)}},callOverlayHandler:a=>{let s;return e?(a.rseq=r++,s=new Promise(e=>{n[a.rseq]=e}),t(a)):s=new Promise(e=>{t(a,t=>{e(null==t?null:JSON.parse(t))})}),s},startOverlayEvents:()=>{l=!1,t({call:"subscribe",events:Object.keys(s)})},getCombatants:()=>new Promise(e=>{window.OverlayPluginApi.callHandler(JSON.stringify({call:"getCombatants"}),t=>{e(JSON.parse(t).combatants)})})}})(),[C,A]=(0,n.useState)((0,c.d)()),[F,E]=(0,n.useState)(""),[O,z]=(0,n.useState)(""),[I,L]=(0,n.useState)(!1),[P,T]=(0,n.useState)(""),[B,J]=(0,n.useState)(""),[M,R]=(0,n.useState)(0),[Z,W]=(0,n.useState)(0),[q,$]=(0,n.useState)([]),[H,U]=(0,n.useState)(!0),[Y,G]=(0,n.useState)(!1),[K,V]=(0,n.useState)("situation"),Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";s.xT[t]({content:e,duration:1500,placement:"bottom",className:"text text-[1.375rem]"})},X=(e,t)=>{let a=e.slice(-5),r=a.findIndex(e=>e.perpetratorName===t.perpetratorName&&e.actionName===t.actionName&&4e3>=Math.abs(e.happenTime-t.happenTime));if(-1!==r){let t=e.length-a.length+r;e.splice(t,1)}e.push(t)},ee=e=>{if("黑涡团"===e)return l.c3.maelstrom;if("双蛇党"===e)return l.c3.twinadder;if("恒辉队"===e)return l.c3.immoflame;throw Error("parseGc: unknown gc:"+e)},et=()=>u.length+Object.keys(h).length,ea=(e,t,a,r,n)=>{if(h[e]&&"static"!==h[e].type&&"initial"!==h[e].type){h[e].owner=t,h[e].resume(),W(e=>e+1);return}h[e]&&"static"!==h[e].type&&h[e].cancel();let s=r,l=null,i=!1,c=()=>{l&&clearInterval(l),delete h[e],W(e=>e+1)};h[e]={dropSpeed:n,get remain(){return s},total:r,owner:t,ptLv:a,get paused(){return i},pause(){i=!0},resume(){i&&(i=!1)},cancel(){c()}},l||(l=setInterval(()=>{i||((s-=n)<=0&&(s=0,c()),W(e=>e+1))},3e3))},er=(e,t,a,r)=>{h[e]&&"static"!==h[e].type&&h[e].cancel();let n=r||0,s=null,l=()=>{s&&clearInterval(s),delete h[e],W(e=>e+1)};h[e]={type:"initial",time:r?{get remain(){return n},total:r}:void 0,ptLv:t,ptTotal:a,cancel(){l()}},s||(s=setInterval(()=>{r&&((n-=1)<=0&&(n=0,l()),W(e=>e+1))},1e3))},en=e=>{if(P===l.om.seize||P===l.om.naadam){let t=Object.values(h).filter(t=>"static"!==t.type&&"initial"!==t.type&&!t.paused&&t.owner===e).map(e=>e.remain);return t.length?t.reduce((e,t)=>e+t):0}return P===l.om.secure?"-":m[e]},es=(0,n.useCallback)(()=>v.filter(e=>e.perpetratorName===O||e.summonedBy===O),[O]),el=(0,n.useCallback)(()=>v.filter(e=>e.victimName===O),[O]),ei=(0,n.useCallback)(async()=>{if(x[F])return x[F];let e=(await _()).find(e=>e.ID.toString(16).toUpperCase()===F);return e?e.Job:void 0},[_,F,O]),ec=(0,n.useCallback)(e=>{let t=l.U5.get(e.zoneID);if(t)T(t);else{if(P){let e;w.currFrontlineResult&&(Object.values(l.xN).includes(P)||P===l.DZ.hiddengorge)&&(e=w.currFrontlineResult,w.currFrontlineResult=void 0),ei().then(t=>{let a=(0,i.A4)({zone:P,job:t,result:e,start_time:w.currFrontlineStartTime,knockouts:es(),deaths:el()});$(e=>[...e,a])}),C.auto_collapse_when_leave_battlefield&&G(!0)}L(!1),T(""),J(""),m.maelstrom=0,m.twinadder=0,m.immoflame=0,Object.entries(h).forEach(e=>{let[t,a]=e;"initial"===a.type||"static"===a.type?delete h[t]:a.cancel()}),u.length=0,p={E0000000:"(场地/dot)"},x={},g={},f={},j={},W(0)}},[P,es,el,ei,C.auto_collapse_when_leave_battlefield]),eo=(0,n.useCallback)(e=>{E(e.charID.toString(16).toUpperCase()),z(e.charName)},[E,z]),ed=(0,n.useCallback)(e=>{let t=e.line[0],a=e.line[2],r=e.line[4];if(I||P){if("03"===t){let t=e.line[2],a=e.line[3];p[t]=a}else if("21"===t||"22"===t){let t=e.line[2],a=e.line[3]||"???",r=e.line[4],n=e.line[5]||"???",s=e.line[6],l=e.line[7]||"???",c=x[t],o="0"!==e.line[8];if("72D3"===r&&(o="0"!==e.line[10]),o&&t&&s){let{hit:o,damageType:d,damage:m,heal:h}=(0,i.SY)(e.line);if(o&&("damage"===d||"both"===d)&&(["星遁天诛","完人","献身","全力挥打","绝空拳","爆破箭","胖胖之墙"].includes(n)||m>0)&&(j["".concat(t,"-").concat(s)]={perpetratorName:a,victimName:l,hitActionName:n,hitActionDamage:m}),r&&s===F&&t!==F){let e=["718A","71A5","A1E3","A8F7","7228","722B","7230","723B","723F","7250","A8F2","72D8","72F7","73E6","7344"];(e.includes(r)||e.includes(n))&&X(b,{happenTime:Date.now(),perpetratorName:a,perpetratorJob:c,actionName:n,actionDamage:h});let t=["A8ED","7199","732D","72E7","72DF","72D3","A1FB","72D2","72F8"];(t.includes(r)||t.includes(n)||m>=C.badboy_threshold)&&X(N,{happenTime:Date.now(),perpetratorName:a,perpetratorJob:c,actionName:n,actionDamage:m})}}}else if("25"===t){let t=e.line[2],a=e.line[3]||"???",r=e.line[4],l=e.line[5];if(t&&!t.startsWith("40")&&r){var n,s;let e;if(f[r]){let t=f[r];p[t]?e=p[t]:t===F&&(e=O)}l||(l=p[r]||"???"),v.push({happenTime:Date.now(),victimName:a,perpetratorName:l,victimJob:x[t],perpetratorJob:x[e||r],summonedBy:e,lasthitActionName:(null==(n=j["".concat(r,"-").concat(t)])?void 0:n.hitActionName)||"???",lasthitActionDamage:(null==(s=j["".concat(r,"-").concat(t)])?void 0:s.hitActionDamage)||0}),W(e=>e+1)}}else if("261"===t&&"Add"===e.line[2]){let t=e.line[3],a=e.line[29];t&&a&&(f[t]=a)}}if("00"!==t||!["0039","0839","0840","083E"].includes(a)||!r)return;let c=r.match(/以(黑涡团|双蛇党|恒辉队)的身份参加了纷争前线！/);if(c||"战斗即将开始！"===r||P===l.DZ.hiddengorge&&"进入了对战区域。 当前职业为可以进行对战的特职时， 状态参数和热键栏会被切换为对战专用版。"===r){c&&c[1]&&J(ee(c[1])),L(!0),Object.keys(j).forEach(e=>delete j[e]),v.length=0,b.length=0,N.length=0,P===l.om.seize?R(4):P===l.om.naadam?R(6):R(0),w.currFrontlineStartTime=Date.now(),C.auto_expand_when_enter_battlefield&&G(!1);return}if(I||P){if(P===l.om.seize){let e=e=>{if("S"===e)return[160,4];if("A"===e)return[120,3];if("B"===e)return[80,2];throw Error("[gcFp] wtf point is? "+e)},t=r.match(/(S|A|B)级的亚拉戈石文(.*?)开始活动了！/);if(t&&t[2]){let a=t[1],r=t[2],[n]=e(a);er(r,a,n),W(e=>e+1);return}let a=r.match(/(黑涡团|双蛇党|恒辉队)占领了(S|A|B)级的亚拉戈石文(.*?)！/);if(a){let t=a[3],r=a[2],n=ee(a[1]),[s,l]=e(r);ea(t,n,r,s,l),W(e=>e+1);return}let n=r.match(/(S|A|B)级的亚拉戈石文(.*?)变为中立状态！/);if(n){let e=n[2];h[e]&&"static"!==h[e].type&&"initial"!==h[e].type&&h[e].pause(),W(e=>e+1);return}let s=r.match(/(S|A|B)级的亚拉戈石文(.*?)的情报已枯竭！/);if(s){let e=s[2];for(h[e]&&"static"!==h[e].type&&"initial"!==h[e].type&&h[e].cancel();u.length&&et()>M;)u.pop();if(u.length<M){let e="seize-".concat(Date.now(),"-").concat(Z);u.push(((e,t)=>{let a=t,r=null,n=()=>{r&&clearInterval(r);let t=u.findIndex(t=>t.key===e);-1!==t&&u.splice(t,1)};return r||(r=setInterval(()=>{(a-=1)<=0&&(a=0,n()),W(e=>e+1)},1e3)),{key:e,get remain(){return a},total:t}})(e,15))}W(e=>e+1);return}if('距离"尘封秘岩（争夺战）"结束还有10分钟。'===r){for(R(3);u.length&&et()>3;)u.pop();W(e=>e+1)}}else if(P===l.om.shatter);else if(P===l.om.naadam){let e=e=>{if("S"===e)return[200,20];if("A"===e)return[100,10];if("B"===e)return[50,5];throw Error("[gcFp] wtf point is? "+e)},t=r.match(/30秒后(S|A|B)级无垢的大地(.*?)即将进入可契约状态。/);if(t&&t[2]){let a=t[1],r=t[2],[n]=e(a);er(r,a,n,30),W(e=>e+1);return}let a=r.match(/(S|A|B)级无垢的大地(.*?)进入了可契约状态！/);if(a&&a[2]){let t=a[1],r=a[2],[n]=e(t);er(r,t,n),W(e=>e+1);return}let n=r.match(/(黑涡团|双蛇党|恒辉队)与(S|A|B)级无垢的大地(.*?)签订了契约。/);if(n){let t=n[3],a=n[2],r=ee(n[1]),[s,l]=e(a);ea(t,r,a,s,l),W(e=>e+1);return}let s=r.match(/无垢的大地(.*?)已失效。/);if(s){let e=s[1];h[e]&&"static"!==h[e].type&&"initial"!==h[e].type&&h[e].cancel(),W(e=>e+1);return}"距离战斗开始已经过5分钟，无垢的大地的同时出现数量减少了！"===r&&(R(4),W(e=>e+1)),"距离战斗开始已经过10分钟，无垢的大地的同时出现数量减少了！"===r&&(R(3),W(e=>e+1)),"距离战斗开始已经过15分钟，无垢的大地的同时出现数量减少了！"===r&&(R(2),W(e=>e+1))}else if(P===l.om.secure){let e=r.match(/(黑涡团|双蛇党|恒辉队)占领了(.*?)！/);if(e){let t=e[2],a=ee(e[1]);h[t]={type:"static",owner:a},W(e=>e+1);return}let t=r.match(/(.*?)恢复成了中立状态！/);if(t){h[t[1]]={type:"static"},W(e=>e+1);return}}if(Object.values(l.om).includes(P));else if(P===l.DZ.hiddengorge){let e=r.match(/获得了([\d,]+)点系列赛经验值。/);e&&e[1]&&("1,250"===e[1]?w.currFrontlineResult="win":"750"===e[1]&&(w.currFrontlineResult="lose"))}else{let e=r.match(/获得了(\d+)点系列赛经验值。/);e&&e[1]&&("900"===e[1]?w.currFrontlineResult="win":"700"===e[1]&&(w.currFrontlineResult="lose"))}}},[I,P,M,Z,F,O,C.auto_expand_when_enter_battlefield,C.badboy_threshold]),em=(0,n.useCallback)(()=>{let e=q.map(e=>e.knockouts).flat(),t=q.map(e=>e.deaths).flat(),a=Math.floor(e.length/(t.length||1)*100)/100,r=q.length?Math.floor(e.length/q.length*100)/100:0,n=q.length?Math.floor(t.length/q.length*100)/100:0,s={};e.forEach(e=>{s[e.lasthitActionName]||(s[e.lasthitActionName]=0),s[e.lasthitActionName]++});let l=Object.entries(s).map(e=>{let[t,a]=e;return{amount:a,label:t}}),i={};return t.forEach(e=>{i[e.lasthitActionName]||(i[e.lasthitActionName]=0),i[e.lasthitActionName]++}),{knockouts:e,deaths:t,kd:a,knockoutEachMatch:r,deathEachMatch:n,knockoutDataForPie:l,deathDataForPie:Object.entries(i).map(e=>{let[t,a]=e;return{amount:a,label:t}})}},[q]);return(0,n.useEffect)(()=>{let e=(0,o.Z)();A(e),e.auto_collapse_when_launch&&G(!0);let t=e=>{e.origin===window.location.origin&&"config:update"===e.data.type&&(console.log("update config"),A((0,o.Z)()))};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[]),(0,n.useEffect)(()=>(a(window),k("ChangeZone",ec),k("ChangePrimaryPlayer",eo),k("LogLine",ed),S(),()=>{D("ChangeZone",ec),D("ChangePrimaryPlayer",eo),D("LogLine",ed)}),[ec,ed,eo,a,k,D,S]),(0,n.useEffect)(()=>{let e=setInterval(async()=>{if(!I&&!P)return;let e=await _();null==e||e.forEach(e=>{let t=e.ID.toString(16).toUpperCase();x[t]=e.Job,g[t]=e})},1500);return()=>{clearInterval(e)}},[_,I,P]),(0,r.jsx)(y.Provider,{value:{appConfig:C,playerId:F,playerName:O,onConflict:I,zone:P,gc:B,ptMax:M,dummy:Z,frontlineLog:q,showDamageInKD:H,setShowDamageInKD:U,collapsed:Y,setCollapsed:G,activeTab:K,setActiveTab:V,showToast:Q,getGcPoint:en,getGcIncreaseSpeed:e=>{if(P===l.om.seize||P===l.om.naadam){let t=Object.values(h).filter(t=>"static"!==t.type&&"initial"!==t.type&&t.owner===e).map(e=>e.dropSpeed);return t.length?t.reduce((e,t)=>e+t):0}if(P!==l.om.secure)return 0;{let t=Object.values(h).filter(t=>"static"===t.type&&t.owner===e);return(0,i.Hh)(t.length)}},getKnockouts:es,getDeaths:el,formatTime:e=>new Date(e).toTimeString().slice(0,8),getPointCards:()=>{let e=Object.entries(h).map(e=>{let[t,a]=e,r="";return(P===l.om.seize?r="亚拉戈石文":P===l.om.shatter?r="冰封的石文":P===l.om.naadam&&(r="无垢的大地"),r+=t,"initial"===a.type)?{key:"pointMap-".concat(t),type:"neutrality",ptLv:a.ptLv,ptName:r,ptDescription:"中立"+(a.time?"／还需 "+a.time.remain.toString()+"s":"／剩余 "+a.ptTotal.toString())}:"static"===a.type?{key:"pointMap-".concat(t),type:a.owner?"active":"neutrality",specifyColor:a.owner?(0,i.Tv)(a.owner):"",ptName:r,ptDescription:a.owner?(0,i.DB)(a.owner):"中立"}:{key:"pointMap-".concat(t),type:a.paused?"neutrality":"active",specifyColor:a.paused?"":(0,i.Tv)(a.owner),ptLv:a.ptLv,ptName:r,ptProgress:a.remain/a.total*100,ptDescription:(a.paused?"中立":(0,i.DB)(a.owner))+"／剩余 "+a.remain.toString()}});return u.forEach(t=>{e.push({key:"prePoints-".concat(t.key),type:"preparing",ptLv:"?",ptName:"即将刷新",ptProgress:t.remain/t.total*100,ptDescription:"还需 "+t.remain.toString()+"s"})}),e.map(e=>{let t=w.pidIndex++,a=e.key+"-"+t;return(0,r.jsx)(d,{type:e.type,ptLv:e.ptLv,ptName:e.ptName,ptProgress:e.ptProgress,ptDescription:e.ptDescription,specifyColor:e.specifyColor},a)})},lockSituationMsg:()=>{if(!I&&!P)return"还未进入对战";if(!I)return"正在等待战斗开始";if(P===l.om.shatter)return"暂不支持解析 "+(0,i.Ef)(P)[1]+" 的战况数据";if(P===l.DZ.hiddengorge)return"暂不支持解析 烈羽争锋 的战况数据";if(Object.values(l.xN).includes(P))return"暂不支持解析 水晶冲突 的战况数据";return!1},handleCopySituation:()=>{let e={hw:en(l.c3.maelstrom),ss:en(l.c3.twinadder),hh:en(l.c3.immoflame)},t="【剩余点分】黑涡".concat(e.hw," / 双蛇").concat(e.ss," / 恒辉").concat(e.hh);(0,i.lW)(t),Q("已复制！")},resolveLog:em,goodboys:b,badboys:N},children:t})};var S=a(2340);let _=()=>{let{collapsed:e,setCollapsed:t,activeTab:a,setActiveTab:n}=k(),s={situation:"战况",knockout:"击倒",death:"阵亡",goodboy:"好人",badboy:"坏人",statistics:"统计",calendar:"日历",about:"关于"},l=Object.keys(s);return(0,r.jsxs)("div",{className:"w-full flex justify-between items-center p-1 px-2 rounded",style:{backgroundColor:e?"transparent":"rgb(0 0 0 / 0.3)"},children:[(0,r.jsx)("div",{className:"flex gap-2",children:!e&&l.map(e=>(0,r.jsx)("div",{onClick:()=>n(e),"data-active":a===e,className:"text-[1.25rem] px-2 py-1 border border-transparent rounded text-white cursor-pointer text-shadow hover:bg-gray-700 data-[active=true]:bg-white/30 transition-colors duration-200",children:s[e]},e))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[!e&&(0,r.jsx)("div",{className:"text-[1.25rem] px-2 py-1 border border-transparent rounded text-white hover:bg-gray-700 cursor-pointer text-shadow transition-colors duration-200",onClick:()=>window.open("./config"),children:(0,r.jsx)(S.r,{name:"setting-1"})}),(0,r.jsx)("div",{"data-active":e,className:"text-[1.25rem] px-2 py-1 border border-transparent rounded text-white cursor-pointer text-shadow hover:bg-gray-700 data-[active=true]:bg-white/30 transition-colors duration-200",onClick:()=>t(!e),children:e?(0,r.jsx)(S.r,{name:"chevron-down"}):(0,r.jsx)(S.r,{name:"chevron-up"})})]})]})};var C=a(424),A=a(6693),F=a(5705);function E(e){let{gc:t,me:a,floatPoints:n,increaseSpeed:s}=e,l=(0,i.Tv)(t),c=(0,i._E)(t);return(0,r.jsxs)("div",{className:"flex flex-col rounded-lg shadow-lg overflow-hidden bg-center bg-no-repeat bg-contain",style:{backgroundColor:l,backgroundImage:"url(".concat(c,")")},children:[(0,r.jsxs)("div",{className:"flex items-center p-2 pb-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[1.75rem] leading-[1.2] font-medium text-white drop-shadow-[1px_1px_2px_black]",children:(0,i.DB)(t)}),(0,r.jsx)("p",{className:"text-[#cad5e2] m-0 leading-1",children:a?"⭐我方":"　敌方"})]}),(0,r.jsx)("div",{className:"ml-auto mr-1 text-[2.625rem] leading-[1.3] font-bold text-white",children:n})]}),(0,r.jsx)(F.c,{style:{margin:0}}),(0,r.jsxs)("div",{className:"text-right text-white font-medium leading-1 p-1 pt-0 mr-2",style:{fontFamily:'"Eurostar Regular"'},children:["+",(0,r.jsx)("span",{className:"font-bold",children:s}),"/t"]})]})}var O=a(8334),z=a.n(O);let I=()=>{let{gc:e,zone:t,getGcPoint:a,getGcIncreaseSpeed:n,getPointCards:s,appConfig:c,handleCopySituation:o,lockSituationMsg:d}=k();return(0,r.jsxs)("div",{className:z().panel,children:[d()&&(0,r.jsx)("div",{className:"absolute inset-0 z-20 flex items-center justify-center backdrop-blur-sm bg-black/30",children:(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"⛓️\uD83D\uDD12⛓️"}),(0,r.jsx)("div",{className:"text-2xl font-semibold",children:d()})]})}),(0,r.jsx)("div",{className:z().title,children:"剩余点分"}),(0,r.jsx)("div",{className:"w-full grid grid-cols-3 gap-2",children:Object.values(l.c3).map(t=>(0,r.jsx)(E,{gc:t,me:e===t,floatPoints:a(t),increaseSpeed:n(t)},t))}),(0,r.jsx)("div",{className:z().title,children:"当前据点"}),t===l.om.shatter&&(0,r.jsxs)("div",{className:"w-full text-[1.25rem] self-baseline text-white px-1 py-0.5 rounded bg-gray-400/90 border border-black/50",children:["暂不支持解析",(0,i.Ef)(t)[1],"的当前据点数据。"]}),(0,r.jsx)("div",{className:"w-full flex flex-col gap-0.5",children:s()}),(0,r.jsx)("div",{className:"fixed bottom-4 right-8 z-10",children:!c.hide_situation_copy_btn&&(0,r.jsx)(C.$,{size:"large",shape:"circle",theme:"success",icon:(0,r.jsx)(A.A,{}),onClick:o})})]})};var L=a(9218),P=a(9526);let T=e=>{let{color:t="rgb(56, 137, 197)",size:a="1.25rem",className:n=""}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,fill:t,viewBox:"0 0 28 28",className:n,children:(0,r.jsx)("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:(0,r.jsx)("g",{fillRule:"nonzero",children:(0,r.jsx)("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"})})})})},B=e=>{let{msg:t}=e;return(0,r.jsxs)("div",{className:"w-full flex gap-1 items-center text-[1.25rem] self-baseline text-white px-1 py-0.5 rounded border",style:{backgroundColor:"rgba(56, 137, 197, 0.25)",borderColor:"rgba(56, 137, 197, 0.35)"},children:[(0,r.jsx)(T,{}),t]})},J=e=>{let{job:t,showJobName:a,size:n}=e,{job_icon:s,job_name:l}=(0,i._5)(t),c=n||"1.25rem",o="inline-block vertical-align:middle",d={width:c,height:c};return a?(0,r.jsxs)("div",{className:"flex items-center gap-1 text-[1.1rem] text-gray-200 leading-[1] m-0 text-shadow",children:[(0,r.jsx)("img",{src:"./icon/game-job/".concat(s,".png"),className:o,style:d}),l]}):(0,r.jsx)("img",{src:"./icon/game-job/".concat(s,".png"),className:o,style:d})},M=()=>{let{getKnockouts:e,onConflict:t,zone:a,showDamageInKD:n,setShowDamageInKD:s,showToast:l,formatTime:i}=k();return(0,r.jsxs)("div",{className:z().panel,children:[!e().length&&(0,r.jsx)("div",{className:z().title,children:"暂无击倒记录"}),e().length>0&&!t&&!a&&(0,r.jsx)(B,{msg:"此处展示的是上一场的记录，下次进入对战时会被清除。"}),e().map((e,t)=>(0,r.jsxs)("div",{className:z().title,children:[(0,r.jsxs)("div",{children:[i(e.happenTime),"　"]}),(0,r.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,r.jsx)("span",{children:"使用"}),e.summonedBy&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-orange-700",children:e.perpetratorName}),(0,r.jsx)("span",{children:"发动的"})]}),(0,r.jsx)("span",{className:"text-orange-700",children:e.lasthitActionName}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"造成了"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.lasthitActionDamage.toLocaleString()}),(0,r.jsx)("span",{children:"伤害，"})]}),(0,r.jsx)("span",{children:"击倒了"}),(0,r.jsxs)("div",{className:"flex items-center",children:[!!e.victimJob&&(0,r.jsx)(J,{job:e.victimJob}),(0,r.jsx)("span",{className:"text-orange-700",children:e.victimName})]})]})]},"knockout"+t)),(0,r.jsx)("div",{className:"fixed bottom-4 right-8 z-10",children:e().length>0&&(0,r.jsx)(C.$,{size:"large",shape:"circle",theme:"primary",icon:n?(0,r.jsx)(L.A,{}):(0,r.jsx)(P.A,{}),onClick:()=>{l("已"+(n?"隐藏":"显示")+"伤害"),s(!n)}})})]})},R=()=>{let{getDeaths:e,onConflict:t,zone:a,showDamageInKD:n,setShowDamageInKD:s,showToast:l,formatTime:i}=k();return(0,r.jsxs)("div",{className:z().panel,children:[!e().length&&(0,r.jsx)("div",{className:z().title,children:"暂无死亡记录"}),e().length>0&&!t&&!a&&(0,r.jsx)(B,{msg:"此处展示的是上一场的记录，下次进入对战时会被清除。"}),e().map((e,t)=>(0,r.jsxs)("div",{className:z().title,children:[(0,r.jsxs)("div",{children:[i(e.happenTime),"　"]}),(0,r.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,r.jsx)("span",{children:"被"}),(0,r.jsxs)("div",{className:"flex items-center",children:[!!e.perpetratorJob&&(0,r.jsx)(J,{job:e.perpetratorJob}),(0,r.jsx)("span",{className:"text-orange-700",children:e.summonedBy||e.perpetratorName})]}),e.summonedBy&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"召唤的"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.perpetratorName})]}),(0,r.jsx)("span",{children:"用"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.lasthitActionName}),n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"造成了"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.lasthitActionDamage.toLocaleString()}),(0,r.jsx)("span",{children:"伤害，因此死亡"})]}):(0,r.jsx)("span",{children:"击倒了"})]})]},"death"+t)),(0,r.jsx)("div",{className:"fixed bottom-4 right-8 z-10",children:e().length>0&&(0,r.jsx)(C.$,{size:"large",shape:"circle",theme:"primary",icon:n?(0,r.jsx)(L.A,{}):(0,r.jsx)(P.A,{}),onClick:()=>{l("已"+(n?"隐藏":"显示")+"伤害"),s(!n)}})})]})},Z=()=>{let{goodboys:e,onConflict:t,zone:a,formatTime:n}=k();return(0,r.jsxs)("div",{className:z().panel,children:[!e.length&&(0,r.jsx)("div",{className:z().title,children:"暂无记录"}),e.length>0&&!t&&!a&&(0,r.jsx)(B,{msg:"此处展示的是上一场的记录，下次进入对战时会被清除。"}),e.map((e,t)=>(0,r.jsxs)("div",{className:z().title,children:[(0,r.jsxs)("div",{children:[n(e.happenTime),"　"]}),(0,r.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[!!e.perpetratorJob&&(0,r.jsx)(J,{job:e.perpetratorJob}),(0,r.jsx)("span",{className:"text-orange-700",children:e.perpetratorName})]}),(0,r.jsx)("span",{children:"对你发动了"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.actionName}),!!e.actionDamage&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"，回复了"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.actionDamage.toLocaleString()}),(0,r.jsx)("span",{children:"体力"})]})]})]},"goodboy"+t))]})},W=()=>{let{badboys:e,onConflict:t,zone:a,formatTime:n}=k();return(0,r.jsxs)("div",{className:z().panel,children:[!e.length&&(0,r.jsx)("div",{className:z().title,children:"暂无记录"}),e.length>0&&!t&&!a&&(0,r.jsx)(B,{msg:"此处展示的是上一场的记录，下次进入对战时会被清除。"}),e.map((e,t)=>(0,r.jsxs)("div",{className:z().title,children:[(0,r.jsxs)("div",{children:[n(e.happenTime),"　"]}),(0,r.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[!!e.perpetratorJob&&(0,r.jsx)(J,{job:e.perpetratorJob}),(0,r.jsx)("span",{className:"text-orange-700",children:e.perpetratorName})]}),(0,r.jsx)("span",{children:"对你发动了"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.actionName}),!!e.actionDamage&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"，造成了"}),(0,r.jsx)("span",{className:"text-orange-700",children:e.actionDamage.toLocaleString()}),(0,r.jsx)("span",{children:"伤害"})]})]})]},"badboy"+t))]})};var q=a(5947);let $=e=>{let{frontlineLog:t}=e;return(0,r.jsxs)("div",{className:"relative p-2 gap-1 rounded shadow-xl flex items-center",style:{color:(0,i.xq)(t.zone),backgroundColor:(0,i.n8)(t.zone),backgroundImage:"url(".concat((0,i.W4)(t.zone),")"),backgroundSize:"70%",backgroundRepeat:"no-repeat",backgroundPosition:"1% center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center text-[1.5rem] leading-[1] font-medium text-white text-shadow",children:[(0,i.Ef)(t.zone)[1],t.result&&(0,r.jsx)("span",{"data-color":"win"===t.result?"green":"red",className:"text-[1rem] leading-[1] font-normal p-1 text-white ml-1 rounded",style:{backgroundColor:(0,i.wR)(t.result)},children:"win"===t.result?"胜":"lose"===t.result?"负":t.result})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-[1.1rem] text-gray-200 leading-[1] m-0 text-shadow",children:[(0,i.Ey)(t.start_time),(0,r.jsx)(F.c,{layout:"vertical",style:{margin:"0 0.25rem"}}),(0,r.jsx)(J,{job:t.job,showJobName:!0})]})]}),(0,r.jsxs)("div",{className:"ml-auto mr-4 flex items-center gap-1 text-[1.5rem] font-bold",children:[(0,r.jsx)("div",{className:"w-[4.5rem] text-right",children:t.knockouts.length}),(0,r.jsx)("div",{className:"w-[4.5rem] text-right",children:t.deaths.length})]})]})};var H=a(5260),U=a(8339);let Y=e=>{let{data:t}=e,a=t.reduce((e,t)=>e+t.amount,0),n=t.map(e=>({value:e.amount,name:e.label,percent:(e.amount/a*100).toFixed(2)})),s=n.length<=12?{orient:"vertical",left:"left",data:n.map(e=>e.name)}:void 0;return(0,r.jsx)(H.A,{option:{tooltip:{trigger:"item",formatter:e=>"".concat(e.name,": ").concat(e.value," (").concat(e.percent,"%)")},legend:s,series:[{name:"Amount Distribution",type:"pie",radius:"70%",data:n,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},echarts:U})},G=()=>{let{frontlineLog:e,resolveLog:t}=k(),a=t(),n=async()=>{};return(0,r.jsxs)("div",{id:"statistics-tab",className:z().panel,children:[!e.length&&(0,r.jsx)(B,{msg:"暂无记录。请完成至少一场对战后再来查看。"}),(0,r.jsxs)("div",{className:z().title,children:["参战统计",(0,r.jsxs)("div",{className:"ml-auto mr-5 flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-[4.5rem] text-right",children:"K"}),(0,r.jsx)("div",{className:"w-[4.5rem] text-right",children:"D"})]})]}),e.length?e.map((e,t)=>(0,r.jsx)($,{frontlineLog:e},t)):(0,r.jsx)("div",{className:z().content,children:"暂无数据"}),(0,r.jsx)("div",{className:z().title,children:"K/D统计"}),(0,r.jsx)("div",{className:z().content,children:(0,r.jsxs)("div",{className:"w-full grid grid-cols-3",children:[(0,r.jsxs)("div",{children:["参战",(0,r.jsx)("span",{className:"text-orange-700",children:e.length}),"场"]}),(0,r.jsxs)("div",{children:["击倒数 ",(0,r.jsx)("span",{className:"text-orange-700",children:a.knockouts.length})]}),(0,r.jsxs)("div",{children:["死亡数 ",(0,r.jsx)("span",{className:"text-orange-700",children:a.deaths.length})]}),(0,r.jsxs)("div",{children:["K/D ",(0,r.jsx)("span",{className:"text-orange-700",children:a.kd})]}),(0,r.jsxs)("div",{children:["场均击倒 ",(0,r.jsx)("span",{className:"text-orange-700",children:a.knockoutEachMatch})]}),(0,r.jsxs)("div",{children:["场均死亡 ",(0,r.jsx)("span",{className:"text-orange-700",children:a.deathEachMatch})]})]})}),(0,r.jsx)("div",{className:z().title,children:"击倒统计"}),(0,r.jsx)("div",{className:z().content,children:a.knockoutDataForPie.length?(0,r.jsx)(Y,{data:a.knockoutDataForPie}):"暂无数据"}),(0,r.jsx)("div",{className:z().title,children:"死亡统计"}),(0,r.jsx)("div",{className:z().content,children:a.deathDataForPie.length?(0,r.jsx)(Y,{data:a.deathDataForPie}):"暂无数据"}),(0,r.jsx)("div",{className:"fixed bottom-4 right-8 hidden",children:(0,r.jsx)(C.$,{size:"large",shape:"circle",theme:"success",icon:(0,r.jsx)(q.A,{}),onClick:n})})]})};var K=a(2813),V=a(910);let Q=()=>{let{showToast:e}=k(),[t,a]=(0,n.useState)(""),[s,c]=(0,n.useState)(!1),o=async()=>{try{c(!0);let{needUpdate:e,latestVersion:t}=await (0,i.Yj)();e?a(t):a("")}catch(e){console.error("检查应用新版本时发生错误：",e)}finally{c(!1)}},d=async()=>{if(s)return void e("正在检测中，请稍候");await o(),t?e("检测到新版本"):e("已是最新版本","success")},m=async()=>{for(let e of(await caches.keys()))await caches.delete(e);location.reload()};return(0,r.jsxs)("div",{className:z().panel,children:[(0,r.jsxs)("div",{className:z().title,children:[(0,r.jsx)("span",{children:"当前版本："}),(0,r.jsx)("span",{className:"text-orange-700 font-bold",children:"1.9.3"})]}),(0,r.jsx)("div",{className:z().content,style:{flexDirection:"column",alignItems:"start",paddingBottom:"0.375rem"},children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:["检测到新版本：",t]}),(0,r.jsx)(C.$,{size:"large",theme:"success",loading:s,onClick:m,style:{fontFamily:"unset",fontSize:"1.25rem",paddingLeft:"2.25rem",paddingRight:"2.25rem"},children:"点此更新"}),(0,r.jsx)("div",{className:"text-red-600",children:"※当前数据和已记录的场次统计将会丢失。"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"已是最新版本"}),(0,r.jsx)(C.$,{size:"large",theme:"primary",loading:s,onClick:d,style:{fontFamily:"unset",fontSize:"1.25rem",paddingLeft:"2.25rem",paddingRight:"2.25rem"},children:"检查更新"})]})}),(0,r.jsx)("div",{className:z().title,children:"保持联系"}),(0,r.jsxs)("div",{className:z().content,children:[(0,r.jsx)("div",{children:"点击左侧按钮来打开子窗口访问，或是点击右侧按钮复制链接。"}),(0,r.jsx)("div",{className:"flex flex-col gap-1",children:[{key:"githubRepo",icon:(0,r.jsx)(K.A,{}),label:"Github"},{key:"changelogDoc",icon:(0,r.jsx)(V.A,{}),label:"更新日志"}].map(t=>(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(C.$,{size:"large",icon:t.icon,onClick:()=>window.open(l.D5[t.key]),style:{fontFamily:"unset",fontSize:"1.25rem",paddingLeft:"auto",paddingRight:"auto",width:"12.5rem"},children:t.label}),(0,r.jsx)(C.$,{size:"large",icon:(0,r.jsx)(A.A,{}),onClick:()=>{(0,i.lW)(l.D5[t.key]),e("已复制链接")}})]},t.key))})]})]})},X=new Date("2025-07-17T15:00:00Z"),ee=[0,1,2];function et(e,t){return Math.floor((a(t)-a(e))/864e5);function a(e){return e.getTime()+1e3*e.getTimezoneOffset()*60}}function ea(){let[e,t]=(0,n.useState)(new Date),[a,s]=(0,n.useState)(et(X,new Date)),[c,o]=(0,n.useState)(a%4);(0,n.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;t(e);let a=et(X,e);s(a),o(a%4)},1e3);return()=>clearInterval(e)},[]);let d=e=>{switch(e){case 0:return(0,i.Ef)(l.om.seize);case 1:return(0,i.Ef)(l.om.shatter);case 2:return(0,i.Ef)(l.om.naadam);case 3:return(0,i.Ef)(l.om.secure);default:throw Error("Invalid remainder value")}},m=e=>{switch(e){case 0:return(0,i.xq)(l.om.seize);case 1:return(0,i.xq)(l.om.shatter);case 2:return(0,i.xq)(l.om.naadam);case 3:return(0,i.xq)(l.om.secure);default:throw Error("Invalid remainder value")}},h=e=>{switch(e){case 0:return(0,i.n8)(l.om.seize);case 1:return(0,i.n8)(l.om.shatter);case 2:return(0,i.n8)(l.om.naadam);case 3:return(0,i.n8)(l.om.secure);default:throw Error("Invalid remainder value")}},u=(e,t)=>{let a=new Date(e);return a.setHours(23,0,0,0),e.getTime()>=a.getTime()&&a.setDate(a.getDate()+1),t&&a.setDate(a.getDate()+t),a},p=(e,t)=>{let a=u(e,t).getTime()-e.getTime(),r=Math.floor(a/36e5).toString().padStart(2,"0"),n=Math.floor(a%36e5/6e4).toString().padStart(2,"0"),s=Math.floor(a%6e4/1e3).toString().padStart(2,"0");return"".concat(r,"小时").concat(n,"分").concat(s,"秒")};return(0,r.jsxs)("div",{className:z().panel,children:[(0,r.jsx)("div",{className:z().title,children:(0,r.jsxs)("div",{className:"flex w-full items-center",children:[(0,r.jsx)("div",{children:"当前战场"}),(0,r.jsx)("div",{className:"ml-auto",children:"(还剩".concat(p(e),")")})]})}),(0,r.jsx)("div",{className:"relative p-2 gap-1 rounded shadow-xl flex items-center",style:{color:m(c),backgroundColor:h(c),backgroundImage:"url(".concat((e=>{switch(e){case 0:return(0,i.W4)(l.om.seize);case 1:return(0,i.W4)(l.om.shatter);case 2:return(0,i.W4)(l.om.naadam);case 3:return(0,i.W4)(l.om.secure);default:throw Error("Invalid remainder value")}})(c),")"),backgroundSize:"70%",backgroundRepeat:"no-repeat",backgroundPosition:"1% center"},children:(0,r.jsxs)("div",{className:"ml-auto",children:[(0,r.jsx)("div",{className:"text-[1.75rem] leading-[1.5] font-medium text-white text-shadow",children:d(c)[1]}),(0,r.jsx)("p",{className:"text-[#cad5e2] m-0 mr-1 text-right",children:d(c)[2]})]})}),(0,r.jsx)("div",{className:z().title,children:"未来战场"}),(0,r.jsx)("div",{className:"flex flex-col gap-0.5 text-[1.125rem]",children:ee.map(t=>{let a=(c+t+1)%4;return(0,r.jsxs)("div",{className:"flex items-center border border-black/50 rounded px-1 py-0.5",style:{color:m(a),backgroundColor:h(a)},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"mx-[0.3em] ml-[0.5em]",children:" \xb7 "}),(0,r.jsx)("span",{children:d(a)[1]})]}),(0,r.jsx)("div",{className:"ml-auto",children:"　(".concat(u(e,t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"/").replace(",",""),"／").concat(p(e,t),"后)")})]},"future"+t)})})]})}function er(){let{collapsed:e,activeTab:t}=k();return(0,r.jsxs)("div",{className:"flex flex-col h-full items-center justify-items-center gap-2 p-1 bg-transparent",style:{width:"calc(100% - 8px)"},children:[(0,r.jsx)(_,{}),!e&&(0,r.jsxs)("main",{className:"w-full flex flex-1 flex-col gap-1 items-center overflow-y-auto",children:["situation"===t&&(0,r.jsx)(I,{}),"knockout"===t&&(0,r.jsx)(M,{}),"death"===t&&(0,r.jsx)(R,{}),"goodboy"===t&&(0,r.jsx)(Z,{}),"badboy"===t&&(0,r.jsx)(W,{}),"statistics"===t&&(0,r.jsx)(G,{}),"calendar"===t&&(0,r.jsx)(ea,{}),"about"===t&&(0,r.jsx)(Q,{})]})]})}function en(){return(0,r.jsx)(D,{children:(0,r.jsx)(er,{})})}},4768:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s,q:()=>l});let r="APP_CONFIG";var n=a(2065);let s=()=>{try{let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);return(0,n.d)(t)}}catch(e){}return(0,n.d)()},l=e=>{let t=JSON.stringify(e);localStorage.setItem(r,t)}},8334:e=>{e.exports={panel:"page_panel__8vAP5",title:"page_title__3jonF",title_info:"page_title_info__2SNNr",content:"page_content__kDoxQ"}},8371:(e,t,a)=>{Promise.resolve().then(a.bind(a,3247))},8867:(e,t,a)=>{"use strict";a.d(t,{A4:()=>n,DB:()=>o,Ef:()=>u,Ey:()=>c,Hh:()=>j,SY:()=>v,Tv:()=>d,W4:()=>f,Yj:()=>l,_5:()=>h,_E:()=>m,gc:()=>s,lW:()=>i,n8:()=>x,wR:()=>g,xq:()=>p});var r=a(2793);let n=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){return console.warn("Deep copy failed due to",t,"\norigin:",e),e}},s=(e,t)=>{for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&"__proto__"!==a&&"constructor"!==a&&("object"!=typeof e[a]||Array.isArray(e[a])||null===e[a]?t[a]=void 0!==t[a]?t[a]:e[a]:(Object.prototype.hasOwnProperty.call(t,a)||(t[a]={}),t[a]=s(e[a],t[a])));return t},l=async()=>{var e,t;let a=(null==(t=document)||null==(e=t.location)?void 0:e.origin)+document.location.pathname+"version.json";a+="?t=".concat(new Date().getTime());let r=await fetch(a).then(e=>e.json());return{needUpdate:"1.9.3"!==r.app,latestVersion:r.app}},i=e=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},c=e=>{let t=new Date(e),a=e=>e.toString().padStart(2,"0"),r=t.getFullYear(),n=a(t.getMonth()+1),s=a(t.getDate()),l=a(t.getHours()),i=a(t.getMinutes()),c=a(t.getSeconds());return"".concat(r,"-").concat(n,"-").concat(s," ").concat(l,":").concat(i,":").concat(c)},o=e=>{switch(e){case r.c3.maelstrom:return"黑涡团";case r.c3.twinadder:return"双蛇党";case r.c3.immoflame:return"恒辉队"}},d=e=>{switch(e){case r.c3.maelstrom:return"#942110";case r.c3.twinadder:return"#9F9E44";case r.c3.immoflame:return"#285FB7"}},m=e=>"./image/".concat(e,".png"),h=e=>{let t="",a="";switch(e){case 19:t="骑士",a="paladin";break;case 20:t="武僧",a="monk";break;case 21:t="战士",a="warrior";break;case 22:t="龙骑士",a="dragoon";break;case 23:t="吟游诗人",a="bard";break;case 24:t="白魔法师",a="whitemage";break;case 25:t="黑魔法师",a="blackmage";break;case 27:t="召唤师",a="summoner";break;case 28:t="学者",a="scholar";break;case 30:t="忍者",a="ninja";break;case 31:t="机工士",a="machinist";break;case 32:t="暗黑骑士",a="darkknight";break;case 33:t="占星术士",a="astrologian";break;case 34:t="武士",a="samurai";break;case 35:t="赤魔法师",a="redmage";break;case 37:t="绝枪战士",a="gunbreaker";break;case 38:t="舞者",a="dancer";break;case 39:t="钐镰客",a="reaper";break;case 40:t="贤者",a="sage";break;case 41:t="蝰蛇剑士",a="viper";break;case 42:t="绘灵法师",a="pictomancer";break;default:t="未知",a="none"}return{job_name:t,job_icon:a}},u=e=>{switch(e){case r.om.secure:return["阵地","周边遗迹群","阵地战"];case r.om.seize:return["尘封","尘封秘岩","争夺战"];case r.om.shatter:return["碎冰","荣誉野","碎冰战"];case r.om.naadam:return["草原","昂萨哈凯尔","竞争战"];case r.DZ.hiddengorge:return["隐塞","隐塞","机动战"];case r.xN.palaistra:return["学校","角力学校","水晶冲突"];case r.xN.cloudnine:return["九霄","九霄云上","水晶冲突"];case r.xN.volcanic:return["火山","火山之心","水晶冲突"];case r.xN.castletown:return["大殿","机关大殿","水晶冲突"];case r.xN.redsands:return["沙漠","赤土红沙","水晶冲突"]}},p=e=>{switch(e){case r.om.shatter:case r.xN.redsands:return"black";default:return}},x=e=>{switch(e){case r.om.secure:return"#776154";case r.om.seize:return"#44756A";case r.om.shatter:return"#F6F9F6";case r.om.naadam:return"#616D22";case r.DZ.hiddengorge:return"#946141";case r.xN.palaistra:return"#1E3743";case r.xN.cloudnine:return"#56849B";case r.xN.volcanic:return"#976E5A";case r.xN.castletown:return"#211B19";case r.xN.redsands:return"#EAC38C"}},g=e=>{switch(e){case"1st":return"#FFD700";case"2nd":return"#C0C0C0";case"3rd":return"#CD7F32";case"win":return"#4CAF50";case"lose":return"#F44336";default:return"#FFFFFF"}},f=e=>"./image/".concat(e,".webp"),j=e=>{var t;return null!=(t=[0,2,4,6,10,12,14,18,20,22][e])?t:0},v=e=>{let t,a=!1,r=0,n=0;return[8,10,12,14,16,18,20,22].forEach(l=>{let i=e[l],c=e[l+1];if("0"===i)return;let{dodgeOrMiss:o,damaged:d,healed:m}=function(e){let t=parseInt(e||"0",16);return{dodgeOrMiss:(15&t)==1,damaged:(15&t)==3,healed:(15&t)==4,damageBlocked:(15&t)==5,damageParried:(15&t)==6,instantDead:(255&t)==51}}(i);!o&&(a=!0,d&&(t?"heal"===t&&(t="both"):t="damage",r+=s(c)),m&&(t?"damage"===t&&(t="both"):t="heal",n+=s(c)))}),null!=t||(t="damage"),{hit:a,damageType:t,damage:r,heal:n};function s(e){let t=(e||"").padStart(8,"0");if("4"!==t[4])return parseInt(t.slice(0,4),16);{let e=t.slice(0,2),a=t.slice(2,4),r=t.slice(6,8),n=parseInt(a,16),s=parseInt(r,16);return parseInt(r+e+((n-s+256)%256).toString(16).padStart(2,"0").toUpperCase(),16)}}}}},e=>{e.O(0,[290,397,324,778,237,441,964,358],()=>e(e.s=8371)),_N_E=e.O()}]);