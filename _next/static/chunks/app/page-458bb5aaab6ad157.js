(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4927:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>J});var n=a(5155),s=a(2115),r=a(7054),l=a(2340),i=a(6693),c=a(5947),o=a(8334),d=a.n(o);let m=e=>{let{color:t="rgb(56, 137, 197)",size:a="20px",className:s=""}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,fill:t,viewBox:"0 0 28 28",className:s,children:(0,n.jsx)("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:(0,n.jsx)("g",{fillRule:"nonzero",children:(0,n.jsx)("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"})})})})},h=e=>{let{msg:t}=e;return(0,n.jsxs)("div",{className:"w-full flex gap-1 items-center text-[20px] self-baseline text-white px-1 py-0.5 rounded border",style:{backgroundColor:"rgba(56, 137, 197, 0.25)",borderColor:"rgba(56, 137, 197, 0.35)"},children:[(0,n.jsx)(m,{}),t]})};var p=function(e){return e.maelstrom="maelstrom",e.twinadder="twinadder",e.immoflame="immoflame",e}({}),x=function(e){return e.secure="secure",e.seize="seize",e.shatter="shatter",e.naadam="naadam",e}({});let u=async()=>{var e,t;let a=(null==(t=document)||null==(e=t.location)?void 0:e.origin)+document.location.pathname+"version.json";a+="?t=".concat(new Date().getTime());let n=await fetch(a).then(e=>e.json());return{needUpdate:"1.1.1"!==n.app,latestVersion:n.app}},g=e=>{switch(e){case p.maelstrom:return"黑涡团";case p.twinadder:return"双蛇党";case p.immoflame:return"恒辉队"}},f=e=>{switch(e){case p.maelstrom:return"#942110";case p.twinadder:return"#9F9E44";case p.immoflame:return"#285FB7"}},v=e=>{switch(e){case x.secure:return["阵地","周边遗迹群","阵地战"];case x.seize:return["尘封","尘封秘岩","争夺战"];case x.shatter:return["碎冰","荣誉野","碎冰战"];case x.naadam:return["草原","昂萨哈凯尔","竞争战"]}},j=e=>"./image/".concat(e,".webp"),N=new Date("2025-07-17T15:00:00Z"),w=[0,1,2];function b(e,t){return Math.floor((a(t)-a(e))/864e5);function a(e){return e.getTime()+1e3*e.getTimezoneOffset()*60}}function y(){let[e,t]=(0,s.useState)(new Date),[a,r]=(0,s.useState)(b(N,new Date)),[l,i]=(0,s.useState)(a%4);(0,s.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;t(e);let a=b(N,e);r(a),i(a%4)},1e3);return()=>clearInterval(e)},[]);let c=e=>{switch(e){case 0:return v(x.seize);case 1:return v(x.shatter);case 2:return v(x.naadam);case 3:return v(x.secure);default:throw Error("Invalid remainder value")}},o=e=>{switch(e){case 0:return"#9F9E44";case 1:return"#285FB7";case 2:return"#15803D";case 3:return"#942110";default:throw Error("Invalid remainder value")}},m=(e,t)=>{let a=new Date(e);return a.setHours(23,0,0,0),e.getTime()>=a.getTime()&&a.setDate(a.getDate()+1),t&&a.setDate(a.getDate()+t),a},h=(e,t)=>{let a=m(e,t).getTime()-e.getTime(),n=Math.floor(a/36e5).toString().padStart(2,"0"),s=Math.floor(a%36e5/6e4).toString().padStart(2,"0"),r=Math.floor(a%6e4/1e3).toString().padStart(2,"0");return"".concat(n,"小时").concat(s,"分").concat(r,"秒")};return(0,n.jsxs)("div",{className:d().panel,children:[(0,n.jsx)("div",{className:d().title,children:(0,n.jsxs)("div",{className:"flex w-full items-center",children:[(0,n.jsx)("div",{children:"当前战场"}),(0,n.jsx)("div",{className:"ml-auto",children:"(还剩".concat(h(e),")")})]})}),(0,n.jsx)("div",{className:"relative p-2 gap-1 rounded shadow-xl flex items-center",style:{backgroundColor:o(l),backgroundImage:"url(".concat((e=>{switch(e){case 0:return j(x.seize);case 1:return j(x.shatter);case 2:return j(x.naadam);case 3:return j(x.secure);default:throw Error("Invalid remainder value")}})(l),")"),backgroundSize:"70%",backgroundRepeat:"no-repeat",backgroundPosition:"1% center"},children:(0,n.jsxs)("div",{className:"ml-auto",children:[(0,n.jsx)("div",{className:"text-[28px] leading-[1.5] font-medium text-white text-shadow",children:c(l)[1]}),(0,n.jsx)("p",{className:"text-[#cad5e2] m-0 mr-1 text-right",children:c(l)[2]})]})}),(0,n.jsx)("div",{className:d().title,children:"未来战场"}),(0,n.jsx)("div",{className:"flex flex-col gap-[2px] text-[18px]",children:w.map(t=>(0,n.jsxs)("div",{className:"flex items-center border border-black/50 rounded px-1 py-0.5",style:{backgroundColor:o((l+t+1)%4)},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"mx-[0.3em] ml-[0.5em]",children:" \xb7 "}),(0,n.jsx)("span",{children:c((l+t+1)%4)[1]})]}),(0,n.jsx)("div",{className:"ml-auto",children:"　(".concat(m(e,t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"/").replace(",",""),"／").concat(h(e,t),"后)")})]},"future"+t))})]})}let k=e=>{let{frontlineLog:t}=e;return(0,n.jsxs)("div",{className:"relative p-2 gap-1 rounded shadow-xl flex items-center",style:{backgroundColor:(e=>{switch(e){case x.secure:return"#942110";case x.seize:return"#9F9E44";case x.shatter:return"#285FB7";case x.naadam:return"#15803D";default:throw Error("Invalid remainder value")}})(t.frontline),backgroundImage:"url(".concat(j(t.frontline),")"),backgroundSize:"70%",backgroundRepeat:"no-repeat",backgroundPosition:"1% center"},children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{className:"text-[24px] leading-[1] font-medium text-white text-shadow",children:v(t.frontline)[1]}),(0,n.jsx)("p",{className:"text-[16px] text-[#cad5e2] leading-[1] m-0 mr-1 text-shadow",children:(e=>{let t=new Date(e),a=e=>e.toString().padStart(2,"0"),n=t.getFullYear(),s=a(t.getMonth()+1),r=a(t.getDate()),l=a(t.getHours()),i=a(t.getMinutes()),c=a(t.getSeconds());return"".concat(n,"-").concat(s,"-").concat(r," ").concat(l,":").concat(i,":").concat(c)})(t.start_time)})]}),(0,n.jsxs)("div",{className:"ml-auto mr-4 flex items-center gap-1 text-[24px] font-bold",children:[(0,n.jsx)("div",{className:"w-[72px] text-right",children:t.knockouts.length}),(0,n.jsx)("div",{className:"w-[72px] text-right",children:t.deaths.length})]})]})};function D(e){let{gc:t,me:a,floatPoints:s}=e,r=f(t),l="./image/".concat(t,".png");return(0,n.jsxs)("div",{style:{padding:"8px",gap:"4px",borderRadius:"4px",boxShadow:"0 10px 15px -3px #0000001a, 0 4px 6px -4px #0000001a",display:"flex",alignItems:"center",backgroundColor:r,backgroundImage:"url(".concat(l,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-[28px] leading-[1.5] font-medium text-white",style:{textShadow:"1px 1px 2px black"},children:g(t)}),(0,n.jsx)("p",{className:"text-[#cad5e2] m-0",children:a?"⭐我方":"　敌方"})]}),(0,n.jsx)("div",{className:"ml-auto mr-1 text-[42px] font-bold text-white",children:s})]})}var S=a(5260),C=a(8339);let A=e=>{let{data:t}=e,a=t.reduce((e,t)=>e+t.amount,0),s=t.map(e=>({value:e.amount,name:e.label,percent:(e.amount/a*100).toFixed(2)})),r={tooltip:{trigger:"item",formatter:e=>"".concat(e.name,": ").concat(e.value," (").concat(e.percent,"%)")},legend:{orient:"vertical",left:"left",data:s.map(e=>e.name)},series:[{name:"Amount Distribution",type:"pie",radius:"50%",data:s,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};return(0,n.jsx)(S.A,{option:r,echarts:C})};function E(e){let{type:t,specifyColor:a,ptLv:s,ptName:r,ptProgress:l,ptDescription:i}=e,c="";return c="active"===t?"#70ACFFFF":"#ADADADFF",a&&(c=a),(0,n.jsxs)("div",{className:"relative flex items-center gap-1 p-2 rounded overflow-hidden",style:{backgroundColor:"transparent",border:"2px solid ".concat(c),boxShadow:"0 10px 15px -3px #0000001a, 0 4px 6px -4px #0000001a"},children:[(0,n.jsx)("div",{className:"absolute left-0 top-0 h-full opacity-30 z-0 transition-all pointer-events-none",style:{width:"".concat(null!=l?l:100,"%"),backgroundColor:c}}),(0,n.jsxs)("div",{className:"relative z-10 px-1 flex items-center w-full text-[20px] text-white",children:[(0,n.jsxs)("div",{className:"text-[22px]",children:[(0,n.jsx)("span",{className:"font-bold",children:s}),(0,n.jsxs)("span",{children:["　",r]})]}),(0,n.jsx)("div",{className:"ml-auto",children:i})]})]})}var F=a(5530);let O={[p.maelstrom]:0,[p.twinadder]:0,[p.immoflame]:0},z={},I=[],L={},P={},_={},B=[],T=[],M=[],R=e=>{if("黑涡团"===e)return p.maelstrom;if("双蛇党"===e)return p.twinadder;if("恒辉队"===e)return p.immoflame;throw Error("parseGc: unknown gc:"+e)},q=e=>new Date(e).toTimeString().slice(0,8);function J(){let{showToast:e}=(0,F.d)(),{initialize:t,addOverlayListener:a,removeOverlayListener:o,startOverlayEvents:m}=(()=>{let e,t,a=[],n=0,s={},r={},l=!1;function i(e){if(r[e.type])for(let t of r[e.type])t(e)}return{eventsStarted:!1,initialize:n=>{let r=/[\?&]OVERLAY_WS=([^&]+)/.exec(n.location.href);r?(t=t=>{a?a.push(t):e.send(JSON.stringify(t))},!function n(){(e=new WebSocket(r[1])).addEventListener("error",e=>{console.error(e)}),e.addEventListener("open",()=>{let e=null!=a?a:[];for(let n of(a=null,e))t(n)}),e.addEventListener("message",e=>{try{e=JSON.parse(e.data)}catch(t){console.error("Invalid message received: ",e);return}void 0!==e.rseq&&s[e.rseq]?(s[e.rseq](e),delete s[e.rseq]):i(e)}),e.addEventListener("close",()=>{a=[],setTimeout(()=>{n()},300)})}()):(t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a?a.push([e,t]):n.OverlayPluginApi.callHandler(JSON.stringify(e),t)},!function e(){if(!n.OverlayPluginApi||!n.OverlayPluginApi.ready)return void setTimeout(e,300);let s=null!=a?a:[];for(let[e,r]of(a=null,n.__OverlayCallback=i,s))t(e,r)}())},addOverlayListener:(e,t)=>{l&&r[e]&&console.warn("A new listener for ".concat(e," has been registered after event transmission has already begun.")),r[e]||(r[e]=[]),r[e].push(t)},removeOverlayListener:(e,t)=>{if(r[e]){let a=r[e],n=a.indexOf(t);n>-1&&a.splice(n,1)}},callOverlayHandler:a=>{let r;return e?(a.rseq=n++,r=new Promise(e=>{s[a.rseq]=e}),t(a)):r=new Promise(e=>{t(a,t=>{e(null==t?null:JSON.parse(t))})}),r},startOverlayEvents:()=>{l=!1,t({call:"subscribe",events:Object.keys(r)})}}})(),[j,N]=(0,s.useState)(""),[w,b]=(0,s.useState)(!1),S=async()=>{try{b(!0);let{needUpdate:e,latestVersion:t}=await u();e?N(t):N("")}catch(e){console.error("检查应用新版本时发生错误：",e)}finally{b(!1)}},C=async()=>{if(w)return void e("正在检测中，请稍候");await S(),j?e("检测到新版本"):e("已是最新版本")},J=async()=>{for(let e of(await caches.keys()))await caches.delete(e);location.reload()},[Z,W]=(0,s.useState)(""),[H,K]=(0,s.useState)(""),[U,V]=(0,s.useState)(!1),[Y,$]=(0,s.useState)(""),[G,Q]=(0,s.useState)(""),[X,ee]=(0,s.useState)(0),[et,ea]=(0,s.useState)(0),[en,es]=(0,s.useState)([]),[er,el]=(0,s.useState)(Date.now()),ei={situation:"战况",knockout:"击倒",death:"阵亡",goodboy:"好人",badboy:"坏人",statistics:"统计",calendar:"日历",about:"关于"},ec=Object.keys(ei),[eo,ed]=(0,s.useState)("situation"),[em,eh]=(0,s.useState)(!1),ep=()=>I.length+Object.keys(z).length,ex=(e,t,a,n,s)=>{if(z[e]&&"initial"!==z[e].type){z[e].owner=t,z[e].resume(),ea(e=>e+1);return}z[e]&&z[e].cancel();let r=n,l=null,i=!1,c=()=>{l&&clearInterval(l),delete z[e],ea(e=>e+1)};z[e]={get remain(){return r},total:n,owner:t,ptLv:a,get paused(){return i},pause(){i=!0},resume(){i&&(i=!1)},cancel(){c()}},l||(l=setInterval(()=>{i||((r-=s)<=0&&(r=0,c()),ea(e=>e+1))},3e3))},eu=(e,t,a,n)=>{z[e]&&z[e].cancel();let s=n||0,r=null,l=()=>{r&&clearInterval(r),delete z[e],ea(e=>e+1)};z[e]={type:"initial",time:n?{get remain(){return s},total:n}:void 0,ptLv:t,ptTotal:a,cancel(){l()}},r||(r=setInterval(()=>{n&&((s-=1)<=0&&(s=0,l()),ea(e=>e+1))},1e3))},eg=e=>{if(Y!==x.seize&&Y!==x.naadam)return O[e];{let t=Object.values(z).filter(t=>"initial"!==t.type&&t.owner===e).map(e=>e.remain);return t.length?t.reduce((e,t)=>e+t):0}},ef=(0,s.useCallback)(()=>B.filter(e=>e.perpetratorName===H||e.summonedBy===H),[H]),ev=(0,s.useCallback)(()=>B.filter(e=>e.victimName===H),[H]),ej=(0,s.useCallback)(e=>{if(1273===e.zoneID)$(x.secure);else if(431===e.zoneID)$(x.seize);else if(554===e.zoneID)$(x.shatter);else if(888===e.zoneID)$(x.naadam);else{if(Y){let e=(e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){return console.warn("Deep copy failed due to",t,"\norigin:",e),e}})({frontline:Y,start_time:er,knockouts:ef(),deaths:ev()});es(t=>[...t,e])}V(!1),$(""),Q(""),O.maelstrom=0,O.twinadder=0,O.immoflame=0,Object.entries(z).forEach(e=>{let[t,a]=e;"initial"===a.type?delete z[t]:a.cancel()}),I.length=0,L={},P={},_={},ea(0)}},[Y,er,ef,ev]),eN=(0,s.useCallback)(e=>{W(e.charID.toString(16).toUpperCase()),K(e.charName)},[W,K]),ew=(0,s.useCallback)(e=>{var t,a;let n=e.line[0],s=e.line[2],r=e.line[4];if(U||Y){if("03"===n){let t=e.line[2],a=e.line[3];L[t]=a}else if("21"===n||"22"===n){let a=e.line[2],n=e.line[3]||"???",s=e.line[4],r=e.line[5]||"???",l=e.line[6],i=e.line[7]||"???";if("0"!==e.line[8]&&a&&l){let c,o,{hit:d,damage:m}=(t=e.line,c=!1,o=0,[8,10,12,14,16,18,20,22].forEach(e=>{var a;if(((a=t[e])||"").toString().endsWith("3")||"3D"===a||"4"===a){c=!0,o=function(e){let t=(e||"").padStart(8,"0");if("4"!==t[4])return parseInt(t.slice(0,4),16);{let e=t.slice(0,2),a=t.slice(2,4),n=t.slice(6,8),s=parseInt(a,16),r=parseInt(n,16);return parseInt(n+e+((s-r+256)%256).toString(16).padStart(2,"0").toUpperCase(),16)}}(t[e+1]);return}}),{hit:c,damage:o});if(d&&(_["".concat(a,"-").concat(l)]={perpetratorName:n,victimName:i,hitActionName:r,hitActionDamage:m}),s&&l===Z&&a!==Z){let t=["718A","71A5","A1E3","A8F7","7228","722B","7230","723B","723F","7250","A8F2","72D8","闭式舞姿","73E6","命水"];if(t.includes(s)||t.includes(r)){t.includes(s)||console.log("[Action]	"+s+"	"+r+"	"+m);let a=!0;["723B","723F"].includes(s)&&!d&&(a=!1),"光阴神的礼赞凯歌"===r&&"0"===e.line[10]&&(a=!1),a&&T.push({happenTime:Date.now(),perpetratorName:n,actionName:r,actionDamage:m})}let a=["A8ED","7199","732D","72E7"];if(a.includes(s)||a.includes(r)){a.includes(s)||console.log("[Action]	"+s+"	"+r+"	"+m);let e=!0;["732D","72E7"].includes(s)&&!d&&(e=!1),e&&M.push({happenTime:Date.now(),perpetratorName:n,actionName:r,actionDamage:m})}}}}else if("25"===n){let t=e.line[2],n=e.line[3]||"???",s=e.line[4],r=e.line[5]||"???";if(t&&!t.startsWith("40")&&s){let e;if(P[s]){let t=P[s];L[t]?e=L[t]:t===Z&&(e=H)}B.push({happenTime:Date.now(),victimName:n,perpetratorName:r,summonedBy:e,lasthitActionName:(null==(a=_["".concat(s,"-").concat(t)])?void 0:a.hitActionName)||"???"}),ea(e=>e+1)}}else if("261"===n&&"Add"===e.line[2]){let t=e.line[3],a=e.line[29];t&&a&&(P[t]=a)}}if("00"!==n||"0839"!==s&&"083E"!==s||!r)return;let l=r.match(/以(黑涡团|双蛇党|恒辉队)的身份参加了纷争前线！/);if(l&&l[1]){Q(R(l[1])),V(!0),Object.keys(_).forEach(e=>delete _[e]),B.length=0,T.length=0,M.length=0,Y===x.seize?ee(4):Y===x.naadam?ee(6):ee(0),el(Date.now());return}if(U||Y){if(Y===x.seize){let e=e=>{if("S"===e)return[160,4];if("A"===e)return[120,3];if("B"===e)return[80,2];throw Error("[gcFp] wtf point is? "+e)},t=r.match(/(S|A|B)级的亚拉戈石文(.*?)开始活动了！/);if(t&&t[2]){let a=t[1],n=t[2],[s]=e(a);eu(n,a,s),ea(e=>e+1);return}let a=r.match(/(黑涡团|双蛇党|恒辉队)占领了(S|A|B)级的亚拉戈石文(.*?)！/);if(a){let t=a[3],n=a[2],s=R(a[1]),[r,l]=e(n);ex(t,s,n,r,l),ea(e=>e+1);return}let n=r.match(/(S|A|B)级的亚拉戈石文(.*?)变为中立状态！/);if(n){let e=n[2];z[e]&&"initial"!==z[e].type&&z[e].pause(),ea(e=>e+1);return}let s=r.match(/(S|A|B)级的亚拉戈石文(.*?)的情报已枯竭！/);if(s){let e=s[2];for(z[e]&&"initial"!==z[e].type&&z[e].cancel();I.length&&ep()>X;)I.pop();if(I.length<X){let e="seize-".concat(Date.now(),"-").concat(et);I.push(((e,t)=>{let a=t,n=null,s=()=>{n&&clearInterval(n);let t=I.findIndex(t=>t.key===e);-1!==t&&I.splice(t,1)};return n||(n=setInterval(()=>{(a-=1)<=0&&(a=0,s()),ea(e=>e+1)},1e3)),{key:e,get remain(){return a},total:t}})(e,15))}ea(e=>e+1);return}if("距离“尘封秘岩（争夺战）”结束还有10分钟。"===r){for(ee(3);I.length&&ep()>3;)I.pop();ea(e=>e+1)}}else if(Y===x.shatter);else if(Y===x.naadam){let e=e=>{if("S"===e)return[200,20];if("A"===e)return[100,10];if("B"===e)return[50,5];throw Error("[gcFp] wtf point is? "+e)},t=r.match(/30秒后(S|A|B)级无垢的大地(.*?)即将进入可契约状态。/);if(t&&t[2]){let a=t[1],n=t[2],[s]=e(a);eu(n,a,s,30),ea(e=>e+1);return}let a=r.match(/(S|A|B)级无垢的大地(.*?)进入了可契约状态！/);if(a&&a[2]){let t=a[1],n=a[2],[s]=e(t);eu(n,t,s),ea(e=>e+1);return}let n=r.match(/(黑涡团|双蛇党|恒辉队)与(S|A|B)级无垢的大地(.*?)签订了契约。/);if(n){let t=n[3],a=n[2],s=R(n[1]),[r,l]=e(a);ex(t,s,a,r,l),ea(e=>e+1);return}let s=r.match(/无垢的大地(.*?)已失效。/);if(s){let e=s[1];z[e]&&"initial"!==z[e].type&&z[e].cancel(),ea(e=>e+1);return}"距离战斗开始已经过5分钟，无垢的大地的同时出现数量减少了！"===r&&(ee(4),ea(e=>e+1)),"距离战斗开始已经过10分钟，无垢的大地的同时出现数量减少了！"===r&&(ee(3),ea(e=>e+1)),"距离战斗开始已经过15分钟，无垢的大地的同时出现数量减少了！"===r&&(ee(2),ea(e=>e+1))}}},[U,Y,X,et,Z,H]),eb=(0,s.useCallback)(()=>{let e=en.map(e=>e.knockouts).flat(),t=en.map(e=>e.deaths).flat(),a=0;t.length&&(a=Math.floor(e.length/t.length*100)/100);let n=en.length?Math.floor(e.length/en.length*100)/100:0,s=en.length?Math.floor(t.length/en.length*100)/100:0,r={};e.forEach(e=>{r[e.lasthitActionName]||(r[e.lasthitActionName]=0),r[e.lasthitActionName]++});let l=Object.entries(r).map(e=>{let[t,a]=e;return{amount:a,label:t}}),i={};return t.forEach(e=>{i[e.lasthitActionName]||(i[e.lasthitActionName]=0),i[e.lasthitActionName]++}),{knockouts:e,deaths:t,kd:a,knockoutEachMatch:n,deathEachMatch:s,knockoutDataForPie:l,deathDataForPie:Object.entries(i).map(e=>{let[t,a]=e;return{amount:a,label:t}})}},[en])(),ey=async()=>{};(0,s.useEffect)(()=>{S()}),(0,s.useEffect)(()=>(t(window),a("ChangeZone",ej),a("ChangePrimaryPlayer",eN),a("LogLine",ew),m(),()=>{o("ChangeZone",ej),o("ChangePrimaryPlayer",eN),o("LogLine",ew)}),[ej,ew,eN,t,a,o,m]);let ek=()=>U||Y?U?(Y===x.shatter||Y===x.secure)&&"暂不支持解析 "+v(Y)[1]+" 的战况数据":"正在等待战斗开始":"还未进入纷争前线";return(0,n.jsxs)("div",{className:"flex flex-col h-full items-center justify-items-center gap-2 p-1 bg-transparent",style:{width:"calc(100% - 8px)"},children:[(0,n.jsxs)("div",{className:"w-full flex justify-between items-center p-1 px-2 rounded",style:{backgroundColor:em?"transparent":"rgb(0 0 0 / 0.3)"},children:[(0,n.jsx)("div",{className:"flex gap-2",children:!em&&ec.map(e=>(0,n.jsx)("div",{onClick:()=>ed(e),className:"text-[20px] px-2 py-1 border border-transparent rounded text-white cursor-pointer text-shadow",style:{background:eo===e?"rgba(255,255,255,0.3)":"transparent"},children:ei[e]},e))}),(0,n.jsx)("div",{onClick:()=>eh(!em),className:"text-[20px] px-2 py-1 border border-transparent rounded text-white cursor-pointer text-shadow",style:{background:em?"rgba(255, 255, 255, 0.3)":"transparent"},children:em?(0,n.jsx)(l.r,{name:"chevron-down"}):(0,n.jsx)(l.r,{name:"chevron-up"})})]}),!em&&(0,n.jsxs)("main",{className:"w-full flex flex-1 flex-col gap-1 items-center overflow-y-auto",children:["situation"===eo&&(0,n.jsxs)("div",{className:d().panel,children:[ek()&&(0,n.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center backdrop-blur-sm bg-black/30",children:(0,n.jsxs)("div",{className:"text-center text-white",children:[(0,n.jsx)("div",{className:"text-4xl mb-2",children:"⛓️\uD83D\uDD12⛓️"}),(0,n.jsx)("div",{className:"text-2xl font-semibold",children:ek()})]})}),(0,n.jsx)("div",{className:d().title,children:"剩余点分"}),(0,n.jsx)("div",{className:"w-full grid grid-cols-3 gap-2",children:Object.values(p).map(e=>(0,n.jsx)(D,{gc:e,me:G===e,floatPoints:eg(e)},e))}),(0,n.jsx)("div",{className:d().title,children:"当前据点"}),(Y===x.shatter||Y===x.secure)&&(0,n.jsxs)("div",{className:"w-full text-[20px] self-baseline text-white px-1 py-0.5 rounded bg-gray-400/90 border border-black/50",children:["暂不支持解析",v(Y)[1],"的当前据点数据。"]}),(0,n.jsx)("div",{className:"w-full flex flex-col gap-0.5",children:(()=>{let e=Object.entries(z).map(e=>{let[t,a]=e,n="";return(Y===x.seize?n="亚拉戈石文":Y===x.shatter?n="冰封的石文":Y===x.naadam&&(n="无垢的大地"),n+=t,"initial"===a.type)?{key:"pointMap-".concat(t),type:"neutrality",ptLv:a.ptLv,ptName:n,ptDescription:"中立"+(a.time?"／还需 "+a.time.remain.toString()+"s":"／剩余 "+a.ptTotal.toString())}:{key:"pointMap-".concat(t),type:a.paused?"neutrality":"active",specifyColor:a.paused?"":f(a.owner),ptLv:a.ptLv,ptName:n,ptProgress:a.remain/a.total*100,ptDescription:(a.paused?"中立":g(a.owner))+"／剩余 "+a.remain.toString()}});return I.forEach(t=>{e.push({key:"prePoints-".concat(t.key),type:"preparing",ptLv:"?",ptName:"即将刷新",ptProgress:t.remain/t.total*100,ptDescription:"还需 "+t.remain.toString()+"s"})}),e})().map(e=>(0,n.jsx)(E,{type:e.type,ptLv:e.ptLv,ptName:e.ptName,ptProgress:e.ptProgress,ptDescription:e.ptDescription,specifyColor:e.specifyColor},e.key))}),(0,n.jsx)("div",{className:"fixed bottom-4 right-8",children:(0,n.jsx)(r.$,{size:"large",shape:"circle",theme:"success",icon:(0,n.jsx)(i.A,{}),onClick:()=>{let t={hw:eg(p.maelstrom),ss:eg(p.twinadder),hh:eg(p.immoflame)};var a="【剩余点分】黑涡".concat(t.hw," / 双蛇").concat(t.ss," / 恒辉").concat(t.hh);let n=document.createElement("textarea");n.value=a,document.body.appendChild(n),n.select(),document.execCommand("copy"),e("已复制！")}})})]}),"knockout"===eo&&(0,n.jsxs)("div",{className:d().panel,children:[!ef().length&&(0,n.jsx)("div",{className:d().title,children:"暂无击倒记录"}),!!ef().length&&!U&&!Y&&(0,n.jsx)(h,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),ef().map((e,t)=>(0,n.jsxs)("div",{className:d().title,children:[(0,n.jsxs)("div",{children:[q(e.happenTime),"　"]}),(0,n.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,n.jsx)("span",{children:"使用"}),e.summonedBy&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-orange-700",children:e.perpetratorName}),(0,n.jsx)("span",{children:"发动的"})]}),(0,n.jsx)("span",{className:"text-orange-700",children:e.lasthitActionName}),(0,n.jsx)("span",{children:"击倒了"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.victimName})]})]},"knockout"+t))]}),"death"===eo&&(0,n.jsxs)("div",{className:d().panel,children:[!ev().length&&(0,n.jsx)("div",{className:d().title,children:"暂无死亡记录"}),!!ev().length&&!U&&!Y&&(0,n.jsx)(h,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),ev().map((e,t)=>(0,n.jsxs)("div",{className:d().title,children:[(0,n.jsxs)("div",{children:[q(e.happenTime),"　"]}),(0,n.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,n.jsx)("span",{children:"被"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.summonedBy||e.perpetratorName}),e.summonedBy&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"召唤的"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.perpetratorName})]}),(0,n.jsx)("span",{children:"用"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.lasthitActionName}),(0,n.jsx)("span",{children:"击倒了"})]})]},"death"+t))]}),"goodboy"===eo&&(0,n.jsxs)("div",{className:d().panel,children:[!T.length&&(0,n.jsx)("div",{className:d().title,children:"暂无记录"}),!!T.length&&!U&&!Y&&(0,n.jsx)(h,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),T.map((e,t)=>(0,n.jsxs)("div",{className:d().title,children:[(0,n.jsxs)("div",{children:[q(e.happenTime),"　"]}),(0,n.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,n.jsx)("span",{className:"text-orange-700",children:e.perpetratorName}),(0,n.jsx)("span",{children:"对你发动了"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.actionName}),!!e.actionDamage&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"，回复了"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.actionDamage}),(0,n.jsx)("span",{children:"体力"})]})]})]},"goodboy"+t))]}),"badboy"===eo&&(0,n.jsxs)("div",{className:d().panel,children:[!M.length&&(0,n.jsx)("div",{className:d().title,children:"暂无记录"}),!!M.length&&!U&&!Y&&(0,n.jsx)(h,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),M.map((e,t)=>(0,n.jsxs)("div",{className:d().title,children:[(0,n.jsxs)("div",{children:[q(e.happenTime),"　"]}),(0,n.jsxs)("div",{className:"flex flex-wrap flex-1",children:[(0,n.jsx)("span",{className:"text-orange-700",children:e.perpetratorName}),(0,n.jsx)("span",{children:"对你发动了"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.actionName}),!!e.actionDamage&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"，造成了"}),(0,n.jsx)("span",{className:"text-orange-700",children:e.actionDamage}),(0,n.jsx)("span",{children:"伤害"})]})]})]},"badboy"+t))]}),"statistics"===eo&&(0,n.jsxs)("div",{id:"statistics-tab",className:d().panel,children:[!en.length&&(0,n.jsx)(h,{msg:"暂无记录。请完成至少一场纷争前线后再来查看。"}),(0,n.jsxs)("div",{className:d().title,children:["参战统计",(0,n.jsxs)("div",{className:"ml-auto mr-5 flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-[72px] text-right",children:"K"}),(0,n.jsx)("div",{className:"w-[72px] text-right",children:"D"})]})]}),en.length?en.map((e,t)=>(0,n.jsx)(k,{frontlineLog:e},t)):(0,n.jsx)("div",{className:d().content,children:"暂无数据"}),(0,n.jsx)("div",{className:d().title,children:"K/D统计"}),(0,n.jsx)("div",{className:d().content,children:(0,n.jsxs)("div",{className:"w-full grid grid-cols-3",children:[(0,n.jsxs)("div",{children:["参战",(0,n.jsx)("span",{className:"text-orange-700",children:en.length}),"场"]}),(0,n.jsxs)("div",{children:["击倒数 ",(0,n.jsx)("span",{className:"text-orange-700",children:eb.knockouts.length})]}),(0,n.jsxs)("div",{children:["死亡数 ",(0,n.jsx)("span",{className:"text-orange-700",children:eb.deaths.length})]}),(0,n.jsxs)("div",{children:["K/D ",(0,n.jsx)("span",{className:"text-orange-700",children:eb.kd})]}),(0,n.jsxs)("div",{children:["场均击倒 ",(0,n.jsx)("span",{className:"text-orange-700",children:eb.knockoutEachMatch})]}),(0,n.jsxs)("div",{children:["场均死亡 ",(0,n.jsx)("span",{className:"text-orange-700",children:eb.deathEachMatch})]})]})}),(0,n.jsx)("div",{className:d().title,children:"击倒统计"}),(0,n.jsx)("div",{className:d().content,children:eb.knockoutDataForPie.length?(0,n.jsx)(A,{data:eb.knockoutDataForPie}):"暂无数据"}),(0,n.jsx)("div",{className:d().title,children:"死亡统计"}),(0,n.jsx)("div",{className:d().content,children:eb.deathDataForPie.length?(0,n.jsx)(A,{data:eb.deathDataForPie}):"暂无数据"}),(0,n.jsx)("div",{className:"fixed bottom-4 right-8 hidden",children:(0,n.jsx)(r.$,{size:"large",shape:"circle",theme:"success",icon:(0,n.jsx)(c.A,{}),onClick:ey})})]}),"calendar"===eo&&(0,n.jsx)(y,{}),"about"===eo&&(0,n.jsxs)("div",{className:d().panel,children:[(0,n.jsxs)("div",{className:d().title,children:["当前版本：","1.1.1"]}),(0,n.jsx)("div",{className:d().title,style:{flexDirection:"column",alignItems:"start",paddingBottom:"0.375rem"},children:j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["检测到新版本：",j]}),(0,n.jsx)("div",{className:"bg-green-400 text-white rounded border border-transparent px-12 py-1 text-[20px] cursor-pointer text-shadow",onClick:J,children:"点此更新"}),(0,n.jsx)("div",{className:"text-red-600",children:"※当前数据将会丢失。建议在战场外进行更新。"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:"已是最新版本"}),(0,n.jsx)("div",{className:"bg-blue-400 text-white rounded border border-transparent px-12 py-1 text-[20px] cursor-pointer text-shadow",onClick:C,children:"检查更新"})]})})]})]})]})}},5530:(e,t,a)=>{"use strict";a.d(t,{d:()=>l,t:()=>i});var n=a(5155),s=a(2115);let r=(0,s.createContext)({showToast:()=>{}}),l=()=>(0,s.useContext)(r),i=e=>{let{children:t}=e,[a,l]=(0,s.useState)([]),i=(0,s.useCallback)(e=>{let t=Date.now();l(a=>[...a,{id:t,message:e,visible:!0}]),setTimeout(()=>{l(e=>e.map(e=>e.id===t?{...e,visible:!1}:e))},1500),setTimeout(()=>{l(e=>e.filter(e=>e.id!==t))},2e3)},[]);return(0,n.jsxs)(r.Provider,{value:{showToast:i},children:[t,(0,n.jsx)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 space-y-2 z-50",children:a.map(e=>(0,n.jsx)("div",{className:"bg-black/80 text-white text-2xl text-center px-4 py-2 rounded shadow transition-opacity duration-500 ".concat(e.visible?"opacity-100":"opacity-0"),children:e.message},e.id))})]})}},8334:e=>{e.exports={panel:"page_panel__8vAP5",title:"page_title__3jonF",title_info:"page_title_info__2SNNr",content:"page_content__kDoxQ"}},8371:(e,t,a)=>{Promise.resolve().then(a.bind(a,4927))}},e=>{e.O(0,[397,256,441,964,358],()=>e(e.s=8371)),_N_E=e.O()}]);