(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1104:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var r=a(5155),n=a(2115),s=a(8334),l=a.n(s),i=function(e){return e.maelstrom="maelstrom",e.twinadder="twinadder",e.immoflame="immoflame",e}({}),c=function(e){return e.secure="secure",e.seize="seize",e.shatter="shatter",e.naadam="naadam",e}({});let o=async()=>{var e,t;let a=(null==(t=document)||null==(e=t.location)?void 0:e.origin)+document.location.pathname+"version.json";a+="?t=".concat(new Date().getTime());let r=await fetch(a).then(e=>e.json());return{needUpdate:"0.10.0"!==r.app,latestVersion:r.app}},d=e=>{switch(e){case i.maelstrom:return"黑涡团";case i.twinadder:return"双蛇党";case i.immoflame:return"恒辉队"}},p=e=>{switch(e){case i.maelstrom:return"#942110";case i.twinadder:return"#9F9E44";case i.immoflame:return"#285FB7"}},m=e=>{switch(e){case c.secure:return["阵地","周边遗迹群","阵地战"];case c.seize:return["尘封","尘封秘岩","争夺战"];case c.shatter:return["碎冰","荣誉野","碎冰战"];case c.naadam:return["草原","昂萨哈凯尔","竞争战"]}},u=e=>"./image/".concat(e,".webp");function h(e){let{gc:t,me:a,floatPoints:n}=e,s=p(t),l="./image/".concat(t,".png");return(0,r.jsxs)("div",{style:{padding:"8px",gap:"4px",borderRadius:"4px",boxShadow:"0 10px 15px -3px #0000001a, 0 4px 6px -4px #0000001a",display:"flex",alignItems:"center",backgroundColor:s,backgroundImage:"url(".concat(l,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[28px] leading-[1.5] font-medium text-white",style:{textShadow:"1px 1px 2px black"},children:d(t)}),(0,r.jsx)("p",{className:"text-[#cad5e2] m-0",children:a?"⭐我方":"　敌方"})]}),(0,r.jsx)("div",{className:"ml-auto mr-1 text-[42px] font-bold text-white",children:n})]})}function x(e){let{type:t,specifyColor:a,ptLv:n,ptName:s,ptProgress:l,ptDescription:i}=e,c="";c="active"===t?"#70ACFFFF":"#ADADADFF",a&&(c=a);let o={position:"relative",padding:"8px",gap:"4px",borderRadius:"4px",boxShadow:"0 10px 15px -3px #0000001a, 0 4px 6px -4px #0000001a",display:"flex",alignItems:"center",backgroundColor:"transparent",border:"2px solid ".concat(c),overflow:"hidden"},d={position:"absolute",left:0,top:0,height:"100%",width:"".concat(null!=l?l:100,"%"),backgroundColor:c,opacity:.3,zIndex:0,transition:"width 0.3s",pointerEvents:"none"};return(0,r.jsxs)("div",{style:o,children:[(0,r.jsx)("div",{style:d}),(0,r.jsxs)("div",{style:{position:"relative",zIndex:1,width:"100%",display:"flex",alignItems:"center"},children:[(0,r.jsx)("div",{className:"w-[30px] text-[20px] font-bold text-center",children:n&&(0,r.jsx)("span",{children:n})}),(0,r.jsx)("div",{className:"text-[24px] leading-[1.5] font-bold text-white",children:s}),(0,r.jsx)("div",{className:"ml-auto mr-1 text-[24px] text-white",children:i})]})]})}let g=e=>{let{color:t="rgb(56, 137, 197)",size:a="20px",className:n=""}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,fill:t,viewBox:"0 0 28 28",className:n,children:(0,r.jsx)("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd",children:(0,r.jsx)("g",{"fill-rule":"nonzero",children:(0,r.jsx)("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"})})})})},f=e=>{let{msg:t}=e;return(0,r.jsxs)("div",{className:"w-full flex gap-1 items-center text-[20px] self-baseline text-white px-1 py-0.5 rounded border",style:{backgroundColor:"rgba(56, 137, 197, 0.25)",borderColor:"rgba(56, 137, 197, 0.35)"},children:[(0,r.jsx)(g,{}),t]})};var v=a(5530);let j=new Date("07/17/2025 23:00:00"),y=[0,1,2];function b(e,t){return Math.floor((t.getTime()-e.getTime())/864e5)}function w(){let[e,t]=(0,n.useState)(new Date),[a,s]=(0,n.useState)(b(j,new Date)),[i,o]=(0,n.useState)(a%4);(0,n.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;t(e);let a=b(j,e);s(a),o(a%4)},1e3);return()=>clearInterval(e)},[]);let d=e=>{switch(e){case 0:return m(c.seize);case 1:return m(c.shatter);case 2:return m(c.naadam);case 3:return m(c.secure);default:throw Error("Invalid remainder value")}},p=e=>{switch(e){case 0:return"#9F9E44";case 1:return"#285FB7";case 2:return"#15803D";case 3:return"#942110";default:throw Error("Invalid remainder value")}},h=(e,t)=>{let a=new Date(e);return a.setHours(23,0,0,0),e.getTime()>=a.getTime()&&a.setDate(a.getDate()+1),t&&a.setDate(a.getDate()+t),a},x=(e,t)=>{let a=h(e,t).getTime()-e.getTime(),r=Math.floor(a/36e5).toString().padStart(2,"0"),n=Math.floor(a%36e5/6e4).toString().padStart(2,"0"),s=Math.floor(a%6e4/1e3).toString().padStart(2,"0");return"".concat(r,"小时").concat(n,"分").concat(s,"秒")};return(0,r.jsxs)("div",{className:l().panel,children:[(0,r.jsx)("div",{className:l().title,children:(0,r.jsxs)("div",{className:"flex w-full items-center",children:[(0,r.jsx)("div",{children:"当前战场"}),(0,r.jsx)("div",{className:"ml-auto",children:"(还剩".concat(x(e),")")})]})}),(0,r.jsx)("div",{className:"relative p-2 gap-1 rounded shadow-xl flex items-center",style:{backgroundColor:p(i),backgroundImage:"url(".concat((e=>{switch(e){case 0:return u(c.seize);case 1:return u(c.shatter);case 2:return u(c.naadam);case 3:return u(c.secure);default:throw Error("Invalid remainder value")}})(i),")"),backgroundSize:"70%",backgroundRepeat:"no-repeat",backgroundPosition:"1% center"},children:(0,r.jsxs)("div",{className:"ml-auto",children:[(0,r.jsx)("div",{className:"text-[28px] leading-[1.5] font-medium text-white text-shadow",children:d(i)[1]}),(0,r.jsx)("p",{className:"text-[#cad5e2] m-0 mr-1 text-right",children:d(i)[2]})]})}),(0,r.jsx)("div",{className:l().title,children:"未来战场"}),(0,r.jsx)("div",{className:"flex flex-col gap-[2px] text-[18px]",children:y.map(t=>(0,r.jsxs)("div",{className:"flex items-center border border-black/50 rounded px-1 py-0.5",style:{backgroundColor:p((i+t+1)%4)},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"mx-[0.3em] ml-[0.5em]",children:" \xb7 "}),(0,r.jsx)("span",{children:d((i+t+1)%4)[1]})]}),(0,r.jsx)("div",{className:"ml-auto",children:"　(".concat(h(e,t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"/").replace(",",""),"／").concat(x(e,t),"后)")})]},"future"+t))})]})}let N={[i.maelstrom]:0,[i.twinadder]:0,[i.immoflame]:0},k={},S=[],D={},C={},A={},E=[],I=[],z=[],L=e=>{if("黑涡团"===e)return i.maelstrom;if("双蛇党"===e)return i.twinadder;if("恒辉队"===e)return i.immoflame;throw Error("parseGc: unknown gc:"+e)},P=e=>new Date(e).toTimeString().slice(0,8);function T(){let{showToast:e}=(0,v.d)(),{initialize:t,addOverlayListener:a,removeOverlayListener:s,startOverlayEvents:u}=(()=>{let e,t,a=[],r=0,n={},s={},l=!1;function i(e){if(s[e.type])for(let t of s[e.type])t(e)}return{eventsStarted:!1,initialize:r=>{let s=/[\?&]OVERLAY_WS=([^&]+)/.exec(r.location.href);s?(t=t=>{a?a.push(t):e.send(JSON.stringify(t))},!function r(){(e=new WebSocket(s[1])).addEventListener("error",e=>{console.error(e)}),e.addEventListener("open",()=>{let e=null!=a?a:[];for(let r of(a=null,e))t(r)}),e.addEventListener("message",e=>{try{e=JSON.parse(e.data)}catch(t){console.error("Invalid message received: ",e);return}void 0!==e.rseq&&n[e.rseq]?(n[e.rseq](e),delete n[e.rseq]):i(e)}),e.addEventListener("close",()=>{a=[],setTimeout(()=>{r()},300)})}()):(t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a?a.push([e,t]):r.OverlayPluginApi.callHandler(JSON.stringify(e),t)},!function e(){if(!r.OverlayPluginApi||!r.OverlayPluginApi.ready)return void setTimeout(e,300);let n=null!=a?a:[];for(let[e,s]of(a=null,r.__OverlayCallback=i,n))t(e,s)}())},addOverlayListener:(e,t)=>{l&&s[e]&&console.warn("A new listener for ".concat(e," has been registered after event transmission has already begun.")),s[e]||(s[e]=[]),s[e].push(t)},removeOverlayListener:(e,t)=>{if(s[e]){let a=s[e],r=a.indexOf(t);r>-1&&a.splice(r,1)}},callOverlayHandler:a=>{let s;return e?(a.rseq=r++,s=new Promise(e=>{n[a.rseq]=e}),t(a)):s=new Promise(e=>{t(a,t=>{e(null==t?null:JSON.parse(t))})}),s},startOverlayEvents:()=>{l=!1,t({call:"subscribe",events:Object.keys(s)})}}})(),[g,j]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),T=async()=>{try{b(!0);let{needUpdate:e,latestVersion:t}=await o();e?j(t):j("")}catch(e){console.error("检查应用新版本时发生错误：",e)}finally{b(!1)}},O=async()=>{if(y)return void e("正在检测中，请稍候");await T(),g?e("检测到新版本"):e("已是最新版本")},B=async()=>{for(let e of(await caches.keys()))await caches.delete(e);location.reload()},[F,_]=(0,n.useState)(""),[M,q]=(0,n.useState)(""),[R,Z]=(0,n.useState)(!1),[J,W]=(0,n.useState)(""),[H,U]=(0,n.useState)(""),[V,G]=(0,n.useState)(0),[Y,K]=(0,n.useState)(0),[Q,X]=(0,n.useState)("situation"),[$,ee]=(0,n.useState)(!1),et=()=>S.length+Object.keys(k).length,ea=(e,t,a,r,n)=>{if(k[e]&&"initial"!==k[e].type){k[e].owner=t,k[e].resume(),K(e=>e+1);return}k[e]&&k[e].cancel();let s=r,l=null,i=!1,c=()=>{l&&clearInterval(l),delete k[e],K(e=>e+1)};k[e]={get remain(){return s},total:r,owner:t,ptLv:a,get paused(){return i},pause(){i=!0},resume(){i&&(i=!1)},cancel(){c()}},l||(l=setInterval(()=>{i||((s-=n)<=0&&(s=0,c()),K(e=>e+1))},3e3))},er=(e,t,a,r)=>{k[e]&&k[e].cancel();let n=r||0,s=null,l=()=>{s&&clearInterval(s),delete k[e],K(e=>e+1)};k[e]={type:"initial",time:r?{get remain(){return n},total:r}:void 0,ptLv:t,ptTotal:a,cancel(){l()}},s||(s=setInterval(()=>{r&&((n-=1)<=0&&(n=0,l()),K(e=>e+1))},1e3))},en=e=>{if(J!==c.seize&&J!==c.naadam)return N[e];{let t=Object.values(k).filter(t=>"initial"!==t.type&&t.owner===e).map(e=>e.remain);return t.length?t.reduce((e,t)=>e+t):0}},es=e=>{1273===e.zoneID?W(c.secure):431===e.zoneID?W(c.seize):554===e.zoneID?W(c.shatter):888===e.zoneID?W(c.naadam):(Z(!1),W(""),U(""),N.maelstrom=0,N.twinadder=0,N.immoflame=0,Object.entries(k).forEach(e=>{let[t,a]=e;"initial"===a.type?delete k[t]:a.cancel()}),S.length=0,D={},C={},A={},K(0))},el=(0,n.useCallback)(e=>{_(e.charID.toString(16).toUpperCase()),q(e.charName)},[_,q]),ei=(0,n.useCallback)(e=>{var t,a;let r=e.line[0],n=e.line[2],s=e.line[4];if(R||J){if("03"===r){let t=e.line[2],a=e.line[3];D[t]=a}else if("21"===r||"22"===r){let a=e.line[2],r=e.line[3]||"???",n=e.line[4],s=e.line[5]||"???",l=e.line[6],i=e.line[7]||"???";if("0"!==e.line[8]&&a&&l){let c,o,{hit:d,damage:p}=(t=e.line,c=!1,o=0,[8,10,12,14,16,18,20,22].forEach(e=>{var a;if(((a=t[e])||"").toString().endsWith("3")||"3D"===a||"4"===a){c=!0,o=function(e){let t=(e||"").padStart(8,"0");if("4"!==t[4])return parseInt(t.slice(0,4),16);{let e=t.slice(0,2),a=t.slice(2,4),r=t.slice(6,8),n=parseInt(a,16),s=parseInt(r,16);return parseInt(r+e+((n-s+256)%256).toString(16).padStart(2,"0").toUpperCase(),16)}}(t[e+1]);return}}),{hit:c,damage:o});if(d&&(A["".concat(a,"-").concat(l)]={perpetratorName:r,victimName:i,hitActionName:s,hitActionDamage:p}),n&&l===F&&a!==F){let t=["718A","71A5","A1E3","A8F7","7228","722B","7230","723B","723F","7250","勇气","光阴神的礼赞凯歌","闭式舞姿","73E6"];if(t.includes(n)||t.includes(s)){t.includes(n)||console.log("[Action]	"+n+"	"+s+"	"+p);let a=!0;["723B","723F"].includes(n)&&!d&&(a=!1),"光阴神的礼赞凯歌"===s&&"0"===e.line[10]&&(a=!1),a&&I.push({happenTime:Date.now(),perpetratorName:r,actionName:s,actionDamage:p})}let a=["A8ED","7199","732D","72E7"];if(a.includes(n)||a.includes(s)){a.includes(n)||console.log("[Action]	"+n+"	"+s+"	"+p);let e=!0;["732D","72E7"].includes(n)&&!d&&(e=!1),e&&z.push({happenTime:Date.now(),perpetratorName:r,actionName:s,actionDamage:p})}}}}else if("25"===r){let t=e.line[2],r=e.line[3],n=e.line[4],s=e.line[5];if(t&&!t.startsWith("40")&&n&&s&&r){let e;if(C[n]){let t=C[n];D[t]&&(e=D[t])}E.push({happenTime:Date.now(),victimName:r,perpetratorName:s,summonedBy:e,lasthitActionName:(null==(a=A["".concat(n,"-").concat(t)])?void 0:a.hitActionName)||"???"}),K(e=>e+1)}}else if("261"===r&&"Add"===e.line[2]){let t=e.line[3],a=e.line[29];t&&a&&(C[t]=a)}}if("00"!==r||"0839"!==n&&"083E"!==n||!s)return;let l=s.match(/以(黑涡团|双蛇党|恒辉队)的身份参加了纷争前线！/);if(l&&l[1]){U(L(l[1])),Z(!0),Object.keys(A).forEach(e=>delete A[e]),E.length=0,I.length=0,z.length=0,J===c.seize?G(4):J===c.naadam?G(6):G(0);return}if(R||J){if(J===c.seize){let e=e=>{if("S"===e)return[160,4];if("A"===e)return[120,3];if("B"===e)return[80,2];throw Error("[gcFp] wtf point is? "+e)},t=s.match(/(S|A|B)级的亚拉戈石文(.*?)开始活动了！/);if(t&&t[2]){let a=t[1],r=t[2],[n]=e(a);er(r,a,n),K(e=>e+1);return}let a=s.match(/(黑涡团|双蛇党|恒辉队)占领了(S|A|B)级的亚拉戈石文(.*?)！/);if(a){let t=a[3],r=a[2],n=L(a[1]),[s,l]=e(r);ea(t,n,r,s,l),K(e=>e+1);return}let r=s.match(/(S|A|B)级的亚拉戈石文(.*?)变为中立状态！/);if(r){let e=r[2];k[e]&&"initial"!==k[e].type&&k[e].pause(),K(e=>e+1);return}let n=s.match(/(S|A|B)级的亚拉戈石文(.*?)的情报已枯竭！/);if(n){let e=n[2];for(k[e]&&"initial"!==k[e].type&&k[e].cancel();S.length&&et()>V;)S.pop();if(S.length<V){let e="seize-".concat(Date.now(),"-").concat(Y);S.push(((e,t)=>{let a=t,r=null,n=()=>{r&&clearInterval(r);let t=S.findIndex(t=>t.key===e);-1!==t&&S.splice(t,1)};return r||(r=setInterval(()=>{(a-=1)<=0&&(a=0,n()),K(e=>e+1)},1e3)),{key:e,get remain(){return a},total:t}})(e,15))}K(e=>e+1);return}if("距离“尘封秘岩（争夺战）”结束还有10分钟。"===s){for(G(3);S.length&&et()>3;)S.pop();K(e=>e+1)}}else if(J===c.shatter);else if(J===c.naadam){let e=e=>{if("S"===e)return[200,20];if("A"===e)return[100,10];if("B"===e)return[50,5];throw Error("[gcFp] wtf point is? "+e)},t=s.match(/30秒后(S|A|B)级无垢的大地(.*?)即将进入可契约状态。/);if(t&&t[2]){let a=t[1],r=t[2],[n]=e(a);er(r,a,n,30),K(e=>e+1);return}let a=s.match(/(S|A|B)级无垢的大地(.*?)进入了可契约状态！/);if(a&&a[2]){let t=a[1],r=a[2],[n]=e(t);er(r,t,n),K(e=>e+1);return}let r=s.match(/(黑涡团|双蛇党|恒辉队)与(S|A|B)级无垢的大地(.*?)签订了契约。/);if(r){let t=r[3],a=r[2],n=L(r[1]),[s,l]=e(a);ea(t,n,a,s,l),K(e=>e+1);return}let n=s.match(/无垢的大地(.*?)已失效。/);if(n){let e=n[1];k[e]&&"initial"!==k[e].type&&k[e].cancel(),K(e=>e+1);return}"距离战斗开始已经过5分钟，无垢的大地的同时出现数量减少了！"===s&&(G(4),K(e=>e+1)),"距离战斗开始已经过10分钟，无垢的大地的同时出现数量减少了！"===s&&(G(3),K(e=>e+1)),"距离战斗开始已经过15分钟，无垢的大地的同时出现数量减少了！"===s&&(G(2),K(e=>e+1))}}},[R,J,V,Y,F]),ec=()=>E.filter(e=>e.perpetratorName===M||e.summonedBy===M),eo=()=>E.filter(e=>e.victimName===M);(0,n.useEffect)(()=>(t(window),a("ChangeZone",es),a("ChangePrimaryPlayer",el),a("LogLine",ei),u(),T(),()=>{s("ChangeZone",es),s("ChangePrimaryPlayer",el),s("LogLine",ei)}),[ei,el,t,a,s,u]);let ed=()=>R||J?(J===c.shatter||J===c.secure)&&"暂不支持解析 "+m(J)[1]+" 的战况数据":"还未进入纷争前线";return(0,r.jsxs)("div",{className:"flex flex-col h-full items-center justify-items-center gap-2 p-1 bg-transparent",style:{width:"calc(100% - 8px)"},children:[(0,r.jsxs)("div",{className:"w-full flex justify-between items-center p-1 px-2 rounded",style:{backgroundColor:$?"transparent":"rgb(255 255 255 / 0.1)"},children:[(0,r.jsx)("div",{className:"flex gap-2",children:!$&&["situation","knockout","death","goodboy","badboy","calendar","about"].map(e=>(0,r.jsx)("div",{onClick:()=>X(e),className:"text-[20px] px-2 py-1 border border-transparent rounded text-white cursor-pointer text-shadow",style:{background:Q===e?"rgba(255,255,255,0.3)":"transparent"},children:(e=>{switch(e){case"situation":return"战况";case"knockout":return"击倒";case"death":return"阵亡";case"goodboy":return"好人";case"badboy":return"坏人";case"calendar":return"日历";case"about":return"关于";default:return"???"}})(e)},e))}),(0,r.jsxs)("div",{onClick:()=>ee(!$),className:"text-[20px] px-2 py-1 border border-transparent rounded text-white cursor-pointer text-shadow",style:{background:$?"rgba(255, 255, 255, 0.3)":"transparent"},children:["点此",$?"展开":"折叠"]})]}),!$&&(0,r.jsxs)("main",{className:"w-full flex flex-1 flex-col gap-1 items-center overflow-y-auto",children:["situation"===Q&&(0,r.jsxs)("div",{className:l().panel,children:[ed()&&(0,r.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center backdrop-blur-sm bg-black/30",children:(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"⛓️\uD83D\uDD12⛓️"}),(0,r.jsx)("div",{className:"text-2xl font-semibold",children:ed()})]})}),(0,r.jsx)("div",{className:l().title,children:"剩余点分"}),(0,r.jsxs)("div",{className:"w-full grid grid-cols-3 gap-2",children:[(0,r.jsx)(h,{gc:i.maelstrom,me:H===i.maelstrom,floatPoints:en(i.maelstrom)}),(0,r.jsx)(h,{gc:i.twinadder,me:H===i.twinadder,floatPoints:en(i.twinadder)}),(0,r.jsx)(h,{gc:i.immoflame,me:H===i.immoflame,floatPoints:en(i.immoflame)})]}),(0,r.jsx)("div",{className:l().title,children:"当前据点"}),(J===c.shatter||J===c.secure)&&(0,r.jsxs)("div",{className:"w-full text-[20px] self-baseline text-white px-1 py-0.5 rounded bg-gray-400/90 border border-black/50",children:["暂不支持解析",m(J)[1],"的当前据点数据。"]}),(0,r.jsx)("div",{className:"w-full flex flex-col gap-0.5",children:(()=>{let e=Object.entries(k).map(e=>{let[t,a]=e,r="";return(J===c.seize?r="亚拉戈石文":J===c.shatter?r="冰封的石文":J===c.naadam&&(r="无垢的大地"),r+=t,"initial"===a.type)?{key:"pointMap-".concat(t),type:"neutrality",ptLv:a.ptLv,ptName:r,ptDescription:"中立"+(a.time?"／还需 "+a.time.remain.toString()+"s":"／剩余 "+a.ptTotal.toString())}:{key:"pointMap-".concat(t),type:a.paused?"neutrality":"active",specifyColor:a.paused?"":p(a.owner),ptLv:a.ptLv,ptName:r,ptProgress:a.remain/a.total*100,ptDescription:(a.paused?"中立":d(a.owner))+"／剩余 "+a.remain.toString()}});return S.forEach(t=>{e.push({key:"prePoints-".concat(t.key),type:"preparing",ptName:"即将刷新",ptProgress:t.remain/t.total*100,ptDescription:"还需 "+t.remain.toString()+"s"})}),e})().map(e=>(0,r.jsx)(x,{type:e.type,ptLv:e.ptLv,ptName:e.ptName,ptProgress:e.ptProgress,ptDescription:e.ptDescription,specifyColor:e.specifyColor},e.key))})]}),"knockout"===Q&&(0,r.jsxs)("div",{className:l().panel,children:[!ec().length&&(0,r.jsx)("div",{className:l().title,children:"暂无击倒记录"}),!!ec().length&&!R&&!J&&(0,r.jsx)(f,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),ec().map((e,t)=>(0,r.jsxs)("div",{className:l().title,children:[(0,r.jsxs)("span",{children:[P(e.happenTime),"　"]}),(0,r.jsx)("span",{children:"使用"}),e.summonedBy&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{color:"orangered"},children:e.perpetratorName}),(0,r.jsx)("span",{children:"发动的"})]}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.lasthitActionName}),(0,r.jsx)("span",{children:"击倒了"}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.victimName})]},"knockout"+t))]}),"death"===Q&&(0,r.jsxs)("div",{className:l().panel,children:[!eo().length&&(0,r.jsx)("div",{className:l().title,children:"暂无死亡记录"}),!!eo().length&&!R&&!J&&(0,r.jsx)(f,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),eo().map((e,t)=>(0,r.jsxs)("div",{className:l().title,children:[(0,r.jsxs)("span",{children:[P(e.happenTime),"　"]}),(0,r.jsx)("span",{children:"被"}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.summonedBy||e.perpetratorName}),e.summonedBy&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"召唤的"}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.perpetratorName})]}),(0,r.jsx)("span",{children:"用"}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.lasthitActionName}),(0,r.jsx)("span",{children:"击倒了"})]},"death"+t))]}),"goodboy"===Q&&(0,r.jsxs)("div",{className:l().panel,children:[!I.length&&(0,r.jsx)("div",{className:l().title,children:"暂无记录"}),!!I.length&&!R&&!J&&(0,r.jsx)(f,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),I.map((e,t)=>(0,r.jsxs)("div",{className:l().title,children:[(0,r.jsxs)("span",{children:[P(e.happenTime),"　"]}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.perpetratorName}),(0,r.jsx)("span",{children:"对你发动了"}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.actionName})]},"goodboy"+t))]}),"badboy"===Q&&(0,r.jsxs)("div",{className:l().panel,children:[!z.length&&(0,r.jsx)("div",{className:l().title,children:"暂无记录"}),!!z.length&&!R&&!J&&(0,r.jsx)(f,{msg:"此处展示的是上一场的记录，下次进入战场时会被清除。"}),z.map((e,t)=>(0,r.jsxs)("div",{className:l().title,children:[(0,r.jsxs)("span",{children:[P(e.happenTime),"　"]}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.perpetratorName}),(0,r.jsx)("span",{children:"对你发动了"}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.actionName}),!!e.actionDamage&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"，造成了"}),(0,r.jsx)("span",{style:{color:"orangered"},children:e.actionDamage}),(0,r.jsx)("span",{children:"伤害"})]})]},"badboy"+t))]}),"calendar"===Q&&(0,r.jsx)(w,{}),"about"===Q&&(0,r.jsxs)("div",{className:l().panel,children:[(0,r.jsxs)("div",{className:l().title,children:["当前版本：","0.10.0"]}),(0,r.jsx)("div",{className:l().title,style:{flexDirection:"column",alignItems:"start",paddingBottom:"0.375rem"},children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:["检测到新版本：",g]}),(0,r.jsx)("div",{className:"bg-green-400 text-white rounded border border-transparent px-12 py-1 text-[20px] cursor-pointer text-shadow",onClick:B,children:"点此更新"}),(0,r.jsx)("div",{className:"text-red-600",children:"※当前数据将会丢失。建议在战场外进行更新。"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"已是最新版本"}),(0,r.jsx)("div",{className:"bg-blue-400 text-white rounded border border-transparent px-12 py-1 text-[20px] cursor-pointer text-shadow",onClick:O,children:"检查更新"})]})})]})]})]})}},5530:(e,t,a)=>{"use strict";a.d(t,{ToastProvider:()=>i,d:()=>l});var r=a(5155),n=a(2115);let s=(0,n.createContext)({showToast:()=>{}}),l=()=>(0,n.useContext)(s),i=e=>{let{children:t}=e,[a,l]=(0,n.useState)([]),i=(0,n.useCallback)(e=>{let t=Date.now();l(a=>[...a,{id:t,message:e,visible:!0}]),setTimeout(()=>{l(e=>e.map(e=>e.id===t?{...e,visible:!1}:e))},1500),setTimeout(()=>{l(e=>e.filter(e=>e.id!==t))},2e3)},[]);return(0,r.jsxs)(s.Provider,{value:{showToast:i},children:[t,(0,r.jsx)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 space-y-2 z-50",children:a.map(e=>(0,r.jsx)("div",{className:"bg-black/80 text-white text-2xl px-4 py-2 rounded shadow transition-opacity duration-500 ".concat(e.visible?"opacity-100":"opacity-0"),children:e.message},e.id))})]})}},8334:e=>{e.exports={panel:"page_panel__8vAP5",title:"page_title__3jonF",title_info:"page_title_info__2SNNr"}},8371:(e,t,a)=>{Promise.resolve().then(a.bind(a,1104))}},e=>{e.O(0,[397,441,964,358],()=>e(e.s=8371)),_N_E=e.O()}]);